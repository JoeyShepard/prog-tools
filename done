[35m[Ksrc/logging-custom.h[m[K[36m[K:[m[K[32m[K5[m[K[36m[K:[m[K    //Compiling for calculator [01;31m[K-[m[K header should remove all log functions on calculator
[35m[Ksrc/logging-custom.h[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K        #include "forth[01;31m[K-[m[Kengine.h" 
[35m[Ksrc/logging-custom.h[m[K[36m[K:[m[K[32m[K14[m[K[36m[K:[m[K        #include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/debug.h[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/debug.h[m[K[36m[K:[m[K[32m[K8[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kprocess.h"
[35m[Ksrc/key-remap-pc.h[m[K[36m[K:[m[K[32m[K2[m[K[36m[K:[m[K//For remapping keys on calculator independent of PC, see key[01;31m[K-[m[Kremap.h
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kcompatibility.h"
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K9[m[K[36m[K:[m[K    #define FORTH_TRUE              [01;31m[K-[m[K1
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K31[m[K[36m[K:[m[K    //Forth engine memory [01;31m[K-[m[K should be in fastest memory with stacks
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K38[m[K[36m[K:[m[K    #define FORTH_STACK_MASK        (FORTH_STACK_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K45[m[K[36m[K:[m[K    #define ERROR_INT32_SIZE        12  //max 10 digits, 1 for [01;31m[K-[m[K sign, 1 for terminator 
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K138[m[K[36m[K:[m[K        FORTH_RSTACK_DONE,      //Pushed by top[01;31m[K-[m[Klevel secondary. Stop executing when returning from this. 
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K        //Data area [01;31m[K-[m[K like dictionary but no definitions stored there
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K        //TODO: see assembly [01;31m[K-[m[K may need to change order so SH4 doesn't try to load byte by byte
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K183[m[K[36m[K:[m[K        volatile bool executing;    //Set to false by ON in key filter [01;31m[K-[m[K see compatibility.c
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K197[m[K[36m[K:[m[K        //Errors [01;31m[K-[m[K compilation or state error
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K202[m[K[36m[K:[m[K        //Compatibility functions [01;31m[K-[m[K set at initialization so engine can adapt to different platforms
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K212[m[K[36m[K:[m[K        //Compatibility parameters [01;31m[K-[m[K adjused in forth[01;31m[K-[m[Kcompatibility.h for each platform
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K226[m[K[36m[K:[m[K        uint16_t ID;                        //ID assigned to each user[01;31m[K-[m[Kdefined word
[35m[Ksrc/forth-engine.h[m[K[36m[K:[m[K[32m[K227[m[K[36m[K:[m[K        uint8_t type;                       //User[01;31m[K-[m[Kdefined word, variable, constant, etc
[35m[Ksrc/menu.h[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K    //Colors [01;31m[K-[m[K menu 
[35m[Ksrc/menu.h[m[K[36m[K:[m[K[32m[K30[m[K[36m[K:[m[K        //ID_NONE should come last [01;31m[K-[m[K no menu text
[35m[Ksrc/logging-custom.c[m[K[36m[K:[m[K[32m[K2[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/logging-custom.c[m[K[36m[K:[m[K[32m[K4[m[K[36m[K:[m[K#include "logging[01;31m[K-[m[Kcustom.h"
[35m[Ksrc/logging-custom.c[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K    //Compiling for calculator [01;31m[K-[m[K header should remove all log functions on calculator
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K73[m[K[36m[K:[m[K    if (border!=[01;31m[K-[m[K1)
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K75[m[K[36m[K:[m[K        draw_line_horz(x,x+width[01;31m[K-[m[K1,y,border);                //Top
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K76[m[K[36m[K:[m[K        draw_line_horz(x,x+width[01;31m[K-[m[K1,y+height[01;31m[K-[m[K1,border);       //Bottom
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K77[m[K[36m[K:[m[K        draw_line_vert(x,y+1,y+height[01;31m[K-[m[K2,border);             //Left
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K78[m[K[36m[K:[m[K        draw_line_vert(x+width[01;31m[K-[m[K1,y+1,y+height[01;31m[K-[m[K2,border);     //Right
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K82[m[K[36m[K:[m[K    if (fill!=[01;31m[K-[m[K1)
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K84[m[K[36m[K:[m[K        for (int i=y+1;i<y+height[01;31m[K-[m[K1;i++)
[35m[Ksrc/graphics.c[m[K[36m[K:[m[K[32m[K86[m[K[36m[K:[m[K            draw_line_horz(x+1,x+width[01;31m[K-[m[K2,i,fill);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K3[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K31[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack_base=(uintptr_t)stack_base;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K32[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>rstack_base=(struct ForthRStackElement *)rstack_base;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K35[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack_count=stack_count;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K36[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>rstack_count=rstack_count;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K41[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>print=print;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K42[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>print_color=print_color;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>input=input;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K44[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>getkey=getkey;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K45[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>printable=printable;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K46[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>update_screen=update_screen;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>update_modifiers=update_modifiers;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>clear_console=clear_console;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K49[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>max_spaces=max_spaces;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>screen_width=screen_width;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K51[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>screen_height=screen_height;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K57[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>perf_value=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_size=data_size;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_mask=data_size[01;31m[K-[m[K1;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K65[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_mask_16=(engine[01;31m[K-[m[K>data_mask)&FORTH_MASK_16;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K66[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_mask_32=(engine[01;31m[K-[m[K>data_mask)&FORTH_MASK_32;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K72[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data=data;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K79[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>state=false;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K80[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>in_bracket=false;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K81[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K91[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)(engine[01;31m[K-[m[K>stack_base+(engine[01;31m[K-[m[K>stack_count[01;31m[K-[m[K1)*FORTH_CELL_SIZE);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>rstack=engine[01;31m[K-[m[K>rstack_base+engine[01;31m[K-[m[K>rstack_count[01;31m[K-[m[K1;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_NONE;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K104[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_NONE;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K107[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_index=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K111[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i_max=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K112[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_j=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K113[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_j_max=0;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>rstack=engine[01;31m[K-[m[K>rstack_base+engine[01;31m[K-[m[K>rstack_count[01;31m[K-[m[K1;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K121[m[K[36m[K:[m[K    return FORTH_STACK_ELEMENTS[01;31m[K-[m[K((uintptr_t)(engine[01;31m[K-[m[K>stack)[01;31m[K-[m[K(uintptr_t)(engine[01;31m[K-[m[K>stack_base))/FORTH_CELL_SIZE[01;31m[K-[m[K1;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K126[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=value;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K127[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K128[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K133[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K134[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K135[m[K[36m[K:[m[K    return *engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K140[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>rstack<engine[01;31m[K-[m[K>rstack_base)
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K142[m[K[36m[K:[m[K        //Out of R[01;31m[K-[m[Kstack memory [01;31m[K-[m[K abort
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K143[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_RSTACK_FULL;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K144[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K148[m[K[36m[K:[m[K        //Push new values to R[01;31m[K-[m[Kstack
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K149[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value=value;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K150[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value_max=value_max;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K151[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type=type;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K152[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>index=index;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K154[m[K[36m[K:[m[K        //Decrease R[01;31m[K-[m[Kstack pointer to next element
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K155[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K162[m[K[36m[K:[m[K    if (secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_UNDEFINED)
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K164[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K secondary has header but hasn't been defined (ie included in other word)
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K165[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_UNDEFINED;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K166[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error_word=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K168[m[K[36m[K:[m[K    else if (((engine[01;31m[K-[m[K>state==FORTH_STATE_INTERPRET)&&(engine[01;31m[K-[m[K>in_bracket==true))&&(colon_word==secondary))
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K can't run word between [ and ] if word is still being defined
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K171[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_SECONDARY_IN_BRACKET;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error_word=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>executing=true;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K179[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=secondary[01;31m[K-[m[K>address;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>word_headers=word_headers;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>word_bodies=word_bodies;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K182[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>word_count=word_count;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K184[m[K[36m[K:[m[K        //Mark end of R[01;31m[K-[m[Kstack so interpreter can stop executing when it returns from top[01;31m[K-[m[Klevel word
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K185[m[K[36m[K:[m[K        forth_rstack_push(0,0,FORTH_RSTACK_DONE,engine[01;31m[K-[m[K>word_index,engine);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K187[m[K[36m[K:[m[K        //Point to engine[01;31m[K-[m[K>executing flag so interrupt can set to false when ON pressed
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K188[m[K[36m[K:[m[K        on_key_executing=&engine[01;31m[K-[m[K>executing;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K194[m[K[36m[K:[m[K        wrapper_perf_start(&engine[01;31m[K-[m[K>perf_counter); 
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K197[m[K[36m[K:[m[K        while(engine[01;31m[K-[m[K>executing)
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K200[m[K[36m[K:[m[K            log_text("address: %p [",engine[01;31m[K-[m[K>address);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K201[m[K[36m[K:[m[K            log_bytes(engine[01;31m[K-[m[K>address,32);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K203[m[K[36m[K:[m[K            log_primitive(engine[01;31m[K-[m[K>address,word_headers); 
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K207[m[K[36m[K:[m[K            (*engine[01;31m[K-[m[K>address)(engine);
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K208[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>address++;
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K        //Record run[01;31m[K-[m[Ktime from performance counter
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K212[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>perf_value=wrapper_perf_stop(&engine[01;31m[K-[m[K>perf_counter); 
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K214[m[K[36m[K:[m[K        //Clear address so interrupt doesn't set when ON pressed [01;31m[K-[m[K address on engine[01;31m[K-[m[K>executing changes
[35m[Ksrc/forth-engine.c[m[K[36m[K:[m[K[32m[K222[m[K[36m[K:[m[K    return engine[01;31m[K-[m[K>error;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K11[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kactions.h"
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K12[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprocess.h"
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K    if (c=='[01;31m[K-[m[K') return FORTH_CHAR_MINUS; 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K75[m[K[36m[K:[m[K                //No changes [01;31m[K-[m[K always stays same type
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K115[m[K[36m[K:[m[K    struct ForthWordHeader *secondary=words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K118[m[K[36m[K:[m[K        if (secondary[01;31m[K-[m[K>last==true)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K120[m[K[36m[K:[m[K            //Found empty header indicating end of list [01;31m[K-[m[K done searching
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K123[m[K[36m[K:[m[K        else if (!strcasecmp(word,secondary[01;31m[K-[m[K>name))
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K125[m[K[36m[K:[m[K            //Word found [01;31m[K-[m[K return pointer to header
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K            //No match [01;31m[K-[m[K advance to next header and keep searching
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K139[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>secondary=NULL;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K142[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>primitive_ID=find_primitive(word);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K143[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>primitive_ID!=FORTH_PRIM_NOT_FOUND) return FORTH_TYPE_PRIMITIVE;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K146[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>secondary=find_secondary(word,compile[01;31m[K-[m[K>words);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K147[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>secondary!=NULL)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K150[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary_index=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>ID;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K154[m[K[36m[K:[m[K    //Word not primitve or secondary [01;31m[K-[m[K not found
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K168[m[K[36m[K:[m[K    for (uint32_t i=*start;i<console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K        char new_char=console[01;31m[K-[m[K>input.text[i].character;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K        if (i==console[01;31m[K-[m[K>input.len[01;31m[K-[m[K1) return len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K229[m[K[36m[K:[m[K    if (*word_buffer=='[01;31m[K-[m[K')
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K240[m[K[36m[K:[m[K        if (negative==true) total[01;31m[K-[m[K=*word_buffer[01;31m[K-[m[K'0';
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K241[m[K[36m[K:[m[K        else if (negative==false) total+=*word_buffer[01;31m[K-[m[K'0';
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K254[m[K[36m[K:[m[K    if (*word_buffer=='[01;31m[K-[m[K')
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K270[m[K[36m[K:[m[K            digit=*word_buffer[01;31m[K-[m[K'0';
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K272[m[K[36m[K:[m[K            digit=*word_buffer[01;31m[K-[m[K'a'+10;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K274[m[K[36m[K:[m[K            digit=*word_buffer[01;31m[K-[m[K'A'+10;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K275[m[K[36m[K:[m[K        if (negative==true) total[01;31m[K-[m[K=digit;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K294[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left<size)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K299[m[K[36m[K:[m[K        //Not enough memory left in dictionary [01;31m[K-[m[K expand memory
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K300[m[K[36m[K:[m[K        int result=expand_object(FORTH_MEM_DEFINITIONS,FORTH_ID_DEFINITIONS,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K317[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left+=FORTH_MEM_DEFINITIONS;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K344[m[K[36m[K:[m[K    log_text("destination: %p\n",compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K346[m[K[36m[K:[m[K    //Write value to definitions [01;31m[K-[m[K memcpy to avoid casting object pointer to function pointer
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K347[m[K[36m[K:[m[K    memcpy(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index,&word,sizeof(word));
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K350[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index+=sizeof(word);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K351[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(word);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K354[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size+=sizeof(word);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K368[m[K[36m[K:[m[K    //Write value to definitions [01;31m[K-[m[K memcpy to avoid casting object pointer to function pointer
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K369[m[K[36m[K:[m[K    memcpy(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index,&value,sizeof(value));
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K372[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K373[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K376[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K387[m[K[36m[K:[m[K    //Write value to definitions [01;31m[K-[m[K memcpy to avoid casting object pointer to function pointer
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K388[m[K[36m[K:[m[K    memcpy(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index,&value,sizeof(value));
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K391[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K392[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K395[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K406[m[K[36m[K:[m[K    //Write value to definitions [01;31m[K-[m[K memcpy to avoid casting object pointer to function pointer
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K407[m[K[36m[K:[m[K    memcpy(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index,&value,sizeof(value));
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K410[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K411[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K414[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size+=sizeof(value);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K421[m[K[36m[K:[m[K    uint32_t starting_index=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index; 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K427[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K nothing on stack to pop
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K432[m[K[36m[K:[m[K        temp_index[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K435[m[K[36m[K:[m[K        //[01;31m[K-[m[K any element if not ignoring LEAVE or
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K436[m[K[36m[K:[m[K        //[01;31m[K-[m[K any element other than LEAVE if ignoring LEAVE 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K438[m[K[36m[K:[m[K            ((ignore_leave==true)&&(compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[temp_index].type!=FORTH_CONTROL_LEAVE)))
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K441[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K442[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>bytes_left+=sizeof(struct ForthControlElement);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K445[m[K[36m[K:[m[K            *element=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[temp_index];
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K448[m[K[36m[K:[m[K            for (uint32_t i=temp_index;i<starting_index[01;31m[K-[m[K1;i++)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K449[m[K[36m[K:[m[K                compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[i]=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[i+1];
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K458[m[K[36m[K:[m[K    uint32_t temp_index=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index; 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K463[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K nothing on stack to peek
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K468[m[K[36m[K:[m[K        temp_index[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K471[m[K[36m[K:[m[K        //[01;31m[K-[m[K any element if not ignoring LEAVE or
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K472[m[K[36m[K:[m[K        //[01;31m[K-[m[K any element other than LEAVE if ignoring LEAVE 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K474[m[K[36m[K:[m[K            ((ignore_leave==true)&&(compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[temp_index].type!=FORTH_CONTROL_LEAVE)))
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K477[m[K[36m[K:[m[K            *element=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[temp_index];
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K486[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>bytes_left<sizeof(struct ForthControlElement))
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K488[m[K[36m[K:[m[K        //Not enough room left to push new item [01;31m[K-[m[K expand memory
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K489[m[K[36m[K:[m[K        int result=expand_object(FORTH_MEM_CONTROL_STACK,FORTH_ID_CONTROL_STACK,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K503[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>bytes_left+=FORTH_MEM_CONTROL_STACK;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K510[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index].index=offset;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K511[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index].type=type;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K512[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index++;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K513[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(struct ForthControlElement);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K520[m[K[36m[K:[m[K    uint32_t temp_index=compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index; 
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K525[m[K[36m[K:[m[K            //Element type not found [01;31m[K-[m[K done searching
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K530[m[K[36m[K:[m[K        temp_index[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K532[m[K[36m[K:[m[K        if (compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>elements[temp_index].type==element_type)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K534[m[K[36m[K:[m[K            //Element type found [01;31m[K-[m[K done searching
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K543[m[K[36m[K:[m[K    struct ForthWordHeader *secondary=&(compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header[compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index]);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K547[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>words[01;31m[K-[m[K>bytes_left<sizeof(struct ForthWordHeader)*2)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K549[m[K[36m[K:[m[K        //Not enough memory to add new word header [01;31m[K-[m[K expand memory
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K550[m[K[36m[K:[m[K        int result=expand_object(FORTH_MEM_WORD_HEADERS,FORTH_ID_WORD_HEADERS,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K564[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>words[01;31m[K-[m[K>bytes_left+=FORTH_MEM_WORD_HEADERS;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K571[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>bytes_left<word_len+1)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K573[m[K[36m[K:[m[K        //Not enough memory to add new word header [01;31m[K-[m[K expand memory
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K574[m[K[36m[K:[m[K        int result=expand_object(FORTH_MEM_WORD_NAMES,FORTH_ID_WORD_NAMES,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K588[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>bytes_left+=FORTH_MEM_WORD_NAMES;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K597[m[K[36m[K:[m[K        secondary[01;31m[K-[m[K>address=0;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K598[m[K[36m[K:[m[K        secondary[01;31m[K-[m[K>offset=0;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K602[m[K[36m[K:[m[K        secondary[01;31m[K-[m[K>address=(void(**)(struct ForthEngine *))(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K603[m[K[36m[K:[m[K        secondary[01;31m[K-[m[K>offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K605[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>definition_size=0;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K606[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>name_offset=compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K607[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>name_len=word_len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K608[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>name=compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>names+compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K609[m[K[36m[K:[m[K    strcpy(secondary[01;31m[K-[m[K>name,word_buffer);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K610[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>index+=word_len+1;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K611[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=word_len+1;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K612[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>ID=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K613[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>type=word_type;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K614[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>last=false;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K615[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>done=false;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K618[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index++;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K619[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>words[01;31m[K-[m[K>bytes_left[01;31m[K-[m[K=sizeof(*secondary);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K623[m[K[36m[K:[m[K    secondary[01;31m[K-[m[K>last=true;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K631[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>exit_program=false;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K634[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>word_len=0;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K639[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>word_len=next_word_source(source,&start);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K641[m[K[36m[K:[m[K        if (compile[01;31m[K-[m[K>word_len>FORTH_WORD_MAX)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K643[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K word of source is longer than allowed
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K645[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>error_word=source+start;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K648[m[K[36m[K:[m[K        else if (compile[01;31m[K-[m[K>word_len>0)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K652[m[K[36m[K:[m[K            strncpy(word_buffer,source+start,compile[01;31m[K-[m[K>word_len);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K653[m[K[36m[K:[m[K            word_buffer[compile[01;31m[K-[m[K>word_len]=0;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K665[m[K[36m[K:[m[K                    compile[01;31m[K-[m[K>error_word=source+start;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K675[m[K[36m[K:[m[K                    compile[01;31m[K-[m[K>error_word=source+start;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K691[m[K[36m[K:[m[K            start+=compile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K694[m[K[36m[K:[m[K            if (engine[01;31m[K-[m[K>state==FORTH_STATE_INTERPRET)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K699[m[K[36m[K:[m[K                    if (forth_primitives[compile[01;31m[K-[m[K>primitive_ID].immediate==&prim_immediate_execute)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K710[m[K[36m[K:[m[K                    //Number or hex [01;31m[K-[m[K push to stack
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K715[m[K[36m[K:[m[K                    //Primitive [01;31m[K-[m[K execute
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K716[m[K[36m[K:[m[K                    int (*immediate_func)(struct ForthEngine *engine)=forth_primitives[compile[01;31m[K-[m[K>primitive_ID].immediate;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K725[m[K[36m[K:[m[K                            engine[01;31m[K-[m[K>error=result;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K728[m[K[36m[K:[m[K                            compile[01;31m[K-[m[K>error_word=source+start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K735[m[K[36m[K:[m[K                        switch (engine[01;31m[K-[m[K>word_action)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K829[m[K[36m[K:[m[K                        //No special immediate behavior [01;31m[K-[m[K execute primitive body
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K830[m[K[36m[K:[m[K                        void (*body_func)(struct ForthEngine *engine)=forth_primitives[compile[01;31m[K-[m[K>primitive_ID].body;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K835[m[K[36m[K:[m[K                            if (engine[01;31m[K-[m[K>error!=FORTH_ENGINE_ERROR_NONE)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K845[m[K[36m[K:[m[K                    //Break on ON key [01;31m[K-[m[K set up pointers
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K848[m[K[36m[K:[m[K                    on_key_executing=&engine[01;31m[K-[m[K>executing;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K851[m[K[36m[K:[m[K                    int result=forth_execute_secondary(engine,compile[01;31m[K-[m[K>secondary,compile[01;31m[K-[m[K>colon_word,compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header,
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K852[m[K[36m[K:[m[K                                                        compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index,compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K867[m[K[36m[K:[m[K                    //Error [01;31m[K-[m[K word not found
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K869[m[K[36m[K:[m[K                    compile[01;31m[K-[m[K>error_word=source+start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K874[m[K[36m[K:[m[K                if (engine[01;31m[K-[m[K>exit_program) return FORTH_ERROR_NONE;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K876[m[K[36m[K:[m[K            else if (engine[01;31m[K-[m[K>state==FORTH_STATE_COMPILE)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K881[m[K[36m[K:[m[K                    //Number or hex [01;31m[K-[m[K compile to dictionary
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K891[m[K[36m[K:[m[K                    log_text("name: %s\n",forth_primitives[compile[01;31m[K-[m[K>primitive_ID].name);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K893[m[K[36m[K:[m[K                    //Primitive [01;31m[K-[m[K compile
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K894[m[K[36m[K:[m[K                    int (*compile_func)(struct ForthEngine *engine)=forth_primitives[compile[01;31m[K-[m[K>primitive_ID].compile;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K903[m[K[36m[K:[m[K                            engine[01;31m[K-[m[K>error=result;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K906[m[K[36m[K:[m[K                            compile[01;31m[K-[m[K>error_word=source+start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K913[m[K[36m[K:[m[K                        switch (engine[01;31m[K-[m[K>word_action)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1046[m[K[36m[K:[m[K                        //No special compile behavior [01;31m[K-[m[K compile address
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1047[m[K[36m[K:[m[K                        int result=write_definition_primitive(forth_primitives[compile[01;31m[K-[m[K>primitive_ID].body,compile);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1059[m[K[36m[K:[m[K                    result=write_definition_u32(compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>ID,compile);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1065[m[K[36m[K:[m[K                    uint16_t new_index=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1067[m[K[36m[K:[m[K                    //Unknown symbol [01;31m[K-[m[K add word header but don't error
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1079[m[K[36m[K:[m[K    }while(compile[01;31m[K-[m[K>word_len>0);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1091[m[K[36m[K:[m[K    struct ForthDefinitionsInfo *new_definitions=(struct ForthDefinitionsInfo *)(object_address(FORTH_ID_DEFINITIONS,compile[01;31m[K-[m[K>heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1094[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>words=(struct ForthWordHeaderInfo *)(object_address(FORTH_ID_WORD_HEADERS,compile[01;31m[K-[m[K>heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1095[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>definitions!=new_definitions)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1098[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>definitions=new_definitions;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1100[m[K[36m[K:[m[K        //Pointer to execution address changed [01;31m[K-[m[K reassign pointers
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1101[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1103[m[K[36m[K:[m[K        while(secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1106[m[K[36m[K:[m[K            secondary[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+secondary[01;31m[K-[m[K>offset);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1114[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>colon_word=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header+compile[01;31m[K-[m[K>colon_word_index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1117[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header+compile[01;31m[K-[m[K>secondary_index;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1120[m[K[36m[K:[m[K    struct ForthWordNameInfo *new_word_names=(struct ForthWordNameInfo *)(object_address(FORTH_ID_WORD_NAMES,compile[01;31m[K-[m[K>heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1121[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>word_names!=new_word_names)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1124[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>word_names=new_word_names;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1126[m[K[36m[K:[m[K        //Pointer to word names changed [01;31m[K-[m[K reassign pointers to names in word headers
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1127[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1128[m[K[36m[K:[m[K        while(secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1131[m[K[36m[K:[m[K            secondary[01;31m[K-[m[K>name=compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>names+secondary[01;31m[K-[m[K>name_offset;
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1139[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack=(struct ForthControlInfo *)(object_address(FORTH_ID_CONTROL_STACK,compile[01;31m[K-[m[K>heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth-process.c[m[K[36m[K:[m[K[32m[K1142[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>locals=(struct ForthLocalsInfo *)(object_address(FORTH_ID_LOCALS,compile[01;31m[K-[m[K>heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/text.h[m[K[36m[K:[m[K[32m[K8[m[K[36m[K:[m[K    //Custom characters [01;31m[K-[m[K same numbering for all fonts
[35m[Ksrc/text.h[m[K[36m[K:[m[K[32m[K18[m[K[36m[K:[m[K    #define TEXT_INT32_SIZE         12  //max 10 digits, 1 for [01;31m[K-[m[K sign, 1 for terminator
[35m[Ksrc/text.h[m[K[36m[K:[m[K[32m[K21[m[K[36m[K:[m[K    #define TEXT_INT32_COMMAS_SIZE  15  //max 10 digits, max 3 commas, 1 for [01;31m[K-[m[K sign, 1 for terminator 
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[K    //None [01;31m[K-[m[K show menu
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K89[m[K[36m[K:[m[K        //Whole window [01;31m[K-[m[K no split
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K136[m[K[36m[K:[m[K            //[01;31m[K-[m[K1 for zero terminator, [01;31m[K-[m[K2 for "1:"
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K137[m[K[36m[K:[m[K            if (k==MENU_BUFFER[01;31m[K-[m[K1[01;31m[K-[m[K2)
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K144[m[K[36m[K:[m[K                //Hit end of copied string [01;31m[K-[m[K done
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K162[m[K[36m[K:[m[K                //Gray out option if necessary [01;31m[K-[m[K ie Close option when full screen
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K                outline_text(menu_print_buffer,pos,text_color,[01;31m[K-[m[K1,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K174[m[K[36m[K:[m[K            else outline_text(menu_print_buffer,pos,COL_MENU_DE_TEXT,[01;31m[K-[m[K1,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K208[m[K[36m[K:[m[K    //command_ID is START or RESUME [01;31m[K-[m[K loop
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K234[m[K[36m[K:[m[K                //See above [01;31m[K-[m[K menu key (1[01;31m[K-[m[K9,0,+) pressed. *menu_selection set above.
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K279[m[K[36m[K:[m[K                                    if (heap_info[01;31m[K-[m[K>tab==windows[selected_window].tab_index)
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K282[m[K[36m[K:[m[K                                        heap_info[01;31m[K-[m[K>split^=1;
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K313[m[K[36m[K:[m[K                    (*menu_selection)[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K314[m[K[36m[K:[m[K                    if ((*menu_selection)<0) *menu_selection=PROG_LIST_LEN[01;31m[K-[m[K1;
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K333[m[K[36m[K:[m[K                        *menu_selection[01;31m[K-[m[K=PROG_COL2_ID+1;
[35m[Ksrc/menu.c[m[K[36m[K:[m[K[32m[K351[m[K[36m[K:[m[K                            *menu_selection=PROG_LIST_LEN[01;31m[K-[m[K1;
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K5[m[K[36m[K:[m[K    //Compiling for calculator [01;31m[K-[m[K header should remove all log functions on calculator
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K    #include "logging[01;31m[K-[m[Kconfig.h"
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K52[m[K[36m[K:[m[K        //Configure logs in separate logging[01;31m[K-[m[Kconfig.c
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K            log_none("Error: log point out of range [01;31m[K-[m[K %d\n",point);
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K77[m[K[36m[K:[m[K            log_none("Error: log point out of range [01;31m[K-[m[K %d\n",point);
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K103[m[K[36m[K:[m[K            if (log_index==LOG_STACK_COUNT[01;31m[K-[m[K1)
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K120[m[K[36m[K:[m[K            log_none("Error: log point out of range [01;31m[K-[m[K %d\n",point);
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K132[m[K[36m[K:[m[K        log_index[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K141[m[K[36m[K:[m[K        //Only print header if not printed yet [01;31m[K-[m[K prevents empty log entry if nothing logged
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K147[m[K[36m[K:[m[K        if (log_index!=0) log_text_raw("[01;31m[K-[m[K ");
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K153[m[K[36m[K:[m[K            printf("Error [01;31m[K-[m[K unable to open log file: %s\n",log_path);
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K        //Only print header if not printed yet [01;31m[K-[m[K prevents empty log entry if nothing logged
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K179[m[K[36m[K:[m[K            printf("Error [01;31m[K-[m[K unable to open log file: %s\n",log_path);
[35m[Ksrc/logging.c[m[K[36m[K:[m[K[32m[K204[m[K[36m[K:[m[K            printf("Error [01;31m[K-[m[K unable to open log file: %s\n",log_path);
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K169[m[K[36m[K:[m[K    VKEY_ACOFF,         //VKEY_ACON     [01;31m[K-[m[K>  VKEY_ACOFF
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K    VKEY_IMAG,          //VKEY_0        [01;31m[K-[m[K> VKEY_IMAG
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K171[m[K[36m[K:[m[K    VKEY_EQUAL,         //VKEY_DOT      [01;31m[K-[m[K> VKEY_EQUAL
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K    VKEY_PI,            //VKEY_EXP      [01;31m[K-[m[K> VKEY_PI
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K    VKEY_ANS,           //VKEY_NEG      [01;31m[K-[m[K> VKEY_ANS
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K174[m[K[36m[K:[m[K    VKEY_SHIFT_EXE,     //VKEY_EXE      [01;31m[K-[m[K> VKEY_SHIFT_EXE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K175[m[K[36m[K:[m[K    VKEY_LIST,          //VKEY_1        [01;31m[K-[m[K> VKEY_LIST
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    VKEY_MAT,           //VKEY_2        [01;31m[K-[m[K> VKEY_MAT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K177[m[K[36m[K:[m[K    VKEY_NONE,          //VKEY_3        [01;31m[K-[m[K> VKEY_NONE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[K    VKEY_LSBRACKET,     //VKEY_ADD      [01;31m[K-[m[K> VKEY_LSBRACKET
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K179[m[K[36m[K:[m[K    VKEY_RSBRACKET,     //VKEY_SUB      [01;31m[K-[m[K> VKEY_RSBRACKET
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K    VKEY_CATALOG,       //VKEY_4        [01;31m[K-[m[K> VKEY_CATALOG
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K    VKEY_FORMAT,        //VKEY_5        [01;31m[K-[m[K> VKEY_FORMAT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K182[m[K[36m[K:[m[K    VKEY_NONE,          //VKEY_6        [01;31m[K-[m[K> VKEY_NONE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K183[m[K[36m[K:[m[K    VKEY_LCBRACKET,     //VKEY_MUL      [01;31m[K-[m[K> VKEY_LCBRACKET
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K184[m[K[36m[K:[m[K    VKEY_RCBRACKET,     //VKEY_DIV      [01;31m[K-[m[K> VKEY_RCBRACKET
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K185[m[K[36m[K:[m[K    VKEY_CAPTURE,       //VKEY_7        [01;31m[K-[m[K> VKEY_CAPTURE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K    VKEY_CLIP,          //VKEY_8        [01;31m[K-[m[K> VKEY_CLIP
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K187[m[K[36m[K:[m[K    VKEY_PASTE,         //VKEY_9        [01;31m[K-[m[K> VKEY_PASTE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K188[m[K[36m[K:[m[K    VKEY_INS,           //VKEY_DEL      [01;31m[K-[m[K> VKEY_INS
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K189[m[K[36m[K:[m[K    VKEY_SHIFT_FRAC,    //VKEY_FRAC     [01;31m[K-[m[K> VKEY_SHIFT_FRAC
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K190[m[K[36m[K:[m[K    VKEY_SHIFT_FD,      //VKEY_FD       [01;31m[K-[m[K> VKEY_SHIFT_FD
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K191[m[K[36m[K:[m[K    VKEY_CUBE_ROOT,     //VKEY_LEFTP    [01;31m[K-[m[K> VKEY_CUBE_ROOT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K192[m[K[36m[K:[m[K    VKEY_1_X,           //VKEY_RIGHTP   [01;31m[K-[m[K> VKEY_1_X
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K193[m[K[36m[K:[m[K    VKEY_NEXT_SCREEN,   //VKEY_COMMA    [01;31m[K-[m[K> VKEY_NEXT_SCREEN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K194[m[K[36m[K:[m[K    VKEY_SWAP_SCREEN,   //VKEY_ARROW    [01;31m[K-[m[K> VKEY_SWAP_SCREEN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K195[m[K[36m[K:[m[K    VKEY_ANGLE,         //VKEY_XOT      [01;31m[K-[m[K> VKEY_ANGLE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K196[m[K[36m[K:[m[K    VKEY_10_X,          //VKEY_LOG      [01;31m[K-[m[K> VKEY_10_X
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K197[m[K[36m[K:[m[K    VKEY_E_X,           //VKEY_LN       [01;31m[K-[m[K> VKEY_E_X
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K198[m[K[36m[K:[m[K    VKEY_ASIN,          //VKEY_SIN      [01;31m[K-[m[K> VKEY_ASIN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K199[m[K[36m[K:[m[K    VKEY_ACOS,          //VKEY_COS      [01;31m[K-[m[K> VKEY_ACOS
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K200[m[K[36m[K:[m[K    VKEY_ATAN,          //VKEY_TAN      [01;31m[K-[m[K> VKEY_ATAN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K201[m[K[36m[K:[m[K    VKEY_A_LOCK,        //VKEY_ALPHA    [01;31m[K-[m[K> VKEY_A_LOCK
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K202[m[K[36m[K:[m[K    VKEY_SQRT,          //VKEY_SQUARE   [01;31m[K-[m[K> VKEY_SQRT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K203[m[K[36m[K:[m[K    VKEY_X_ROOT,        //VKEY_POWER    [01;31m[K-[m[K> VKEY_X_ROOT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K204[m[K[36m[K:[m[K    VKEY_QUIT,          //VKEY_EXIT     [01;31m[K-[m[K> VKEY_QUIT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K205[m[K[36m[K:[m[K    VKEY_SHIFT_DOWN,    //VKEY_DOWN     [01;31m[K-[m[K> VKEY_SHIFT_DOWN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K206[m[K[36m[K:[m[K    VKEY_SHIFT_RIGHT,   //VKEY_RIGHT    [01;31m[K-[m[K> VKEY_SHIFT_RIGHT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K208[m[K[36m[K:[m[K    VKEY_SHIFT_OPTN,    //VKEY_OPTN     [01;31m[K-[m[K> VKEY_SHIFT_OPTN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K209[m[K[36m[K:[m[K    VKEY_PRGM,          //VKEY_VARS     [01;31m[K-[m[K> VKEY_PRGM
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K210[m[K[36m[K:[m[K    VKEY_SET_UP,        //VKEY_MENU     [01;31m[K-[m[K> VKEY_SET_UP
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K    VKEY_SHIFT_LEFT,    //VKEY_LEFT     [01;31m[K-[m[K> VKEY_SHIFT_LEFT
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K212[m[K[36m[K:[m[K    VKEY_SHIFT_UP,      //VKEY_UP       [01;31m[K-[m[K> VKEY_SHIFT_UP
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K213[m[K[36m[K:[m[K    VKEY_SHIFT_F1,      //VKEY_F1       [01;31m[K-[m[K> VKEY_SHIFT_F1
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K214[m[K[36m[K:[m[K    VKEY_SHIFT_F2,      //VKEY_F2       [01;31m[K-[m[K> VKEY_SHIFT_F2
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K215[m[K[36m[K:[m[K    VKEY_SHIFT_F3,      //VKEY_F3       [01;31m[K-[m[K> VKEY_SHIFT_F3
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K216[m[K[36m[K:[m[K    VKEY_SHIFT_F4,      //VKEY_F4       [01;31m[K-[m[K> VKEY_SHIFT_F4
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K217[m[K[36m[K:[m[K    VKEY_SHIFT_F5,      //VKEY_F5       [01;31m[K-[m[K> VKEY_SHIFT_F5
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K218[m[K[36m[K:[m[K    VKEY_SHIFT_F6,      //VKEY_F6       [01;31m[K-[m[K> VKEY_SHIFT_F6
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K225[m[K[36m[K:[m[K    VKEY_Z,             //VKEY_0        [01;31m[K-[m[K> VKEY_Z
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K226[m[K[36m[K:[m[K    VKEY_SPACE,         //VKEY_DOT      [01;31m[K-[m[K> VKEY_SPACE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K227[m[K[36m[K:[m[K    VKEY_QUOTE,         //VKEY_EXP      [01;31m[K-[m[K> VKEY_QUOTE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K230[m[K[36m[K:[m[K    VKEY_U,             //VKEY_1        [01;31m[K-[m[K> VKEY_U
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K231[m[K[36m[K:[m[K    VKEY_V,             //VKEY_2        [01;31m[K-[m[K> VKEY_V
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K232[m[K[36m[K:[m[K    VKEY_W,             //VKEY_3        [01;31m[K-[m[K> VKEY_W
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K233[m[K[36m[K:[m[K    VKEY_X,             //VKEY_ADD      [01;31m[K-[m[K> VKEY_X
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K234[m[K[36m[K:[m[K    VKEY_Y,             //VKEY_SUB      [01;31m[K-[m[K> VKEY_Y
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K235[m[K[36m[K:[m[K    VKEY_P,             //VKEY_4        [01;31m[K-[m[K> VKEY_P
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K236[m[K[36m[K:[m[K    VKEY_Q,             //VKEY_5        [01;31m[K-[m[K> VKEY_Q
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K237[m[K[36m[K:[m[K    VKEY_R,             //VKEY_6        [01;31m[K-[m[K> VKEY_R
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K238[m[K[36m[K:[m[K    VKEY_S,             //VKEY_MUL      [01;31m[K-[m[K> VKEY_S
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K239[m[K[36m[K:[m[K    VKEY_T,             //VKEY_DIV      [01;31m[K-[m[K> VKEY_T
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K240[m[K[36m[K:[m[K    VKEY_M,             //VKEY_7        [01;31m[K-[m[K> VKEY_M
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K241[m[K[36m[K:[m[K    VKEY_N,             //VKEY_8        [01;31m[K-[m[K> VKEY_N
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K242[m[K[36m[K:[m[K    VKEY_O,             //VKEY_9        [01;31m[K-[m[K> VKEY_O
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K243[m[K[36m[K:[m[K    VKEY_UNDO,          //VKEY_DEL      [01;31m[K-[m[K> VKEY_UNDO
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K244[m[K[36m[K:[m[K    VKEY_G,             //VKEY_FRAC     [01;31m[K-[m[K> VKEY_G
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K245[m[K[36m[K:[m[K    VKEY_H,             //VKEY_FD       [01;31m[K-[m[K> VKEY_H
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K246[m[K[36m[K:[m[K    VKEY_I,             //VKEY_LEFTP    [01;31m[K-[m[K> VKEY_I
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K247[m[K[36m[K:[m[K    VKEY_J,             //VKEY_RIGHTP   [01;31m[K-[m[K> VKEY_J
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K248[m[K[36m[K:[m[K    VKEY_K,             //VKEY_COMMA    [01;31m[K-[m[K> VKEY_K
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K249[m[K[36m[K:[m[K    VKEY_L,             //VKEY_ARROW    [01;31m[K-[m[K> VKEY_L
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K250[m[K[36m[K:[m[K    VKEY_A,             //VKEY_XOT      [01;31m[K-[m[K> VKEY_A
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K251[m[K[36m[K:[m[K    VKEY_B,             //VKEY_LOG      [01;31m[K-[m[K> VKEY_B
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K252[m[K[36m[K:[m[K    VKEY_C,             //VKEY_LN       [01;31m[K-[m[K> VKEY_C
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K253[m[K[36m[K:[m[K    VKEY_D,             //VKEY_SIN      [01;31m[K-[m[K> VKEY_D
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K254[m[K[36m[K:[m[K    VKEY_E,             //VKEY_COS      [01;31m[K-[m[K> VKEY_E
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K255[m[K[36m[K:[m[K    VKEY_F,             //VKEY_TAN      [01;31m[K-[m[K> VKEY_F
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K257[m[K[36m[K:[m[K    VKEY_RADIAN,        //VKEY_SQUARE   [01;31m[K-[m[K> VKEY_RADIAN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K258[m[K[36m[K:[m[K    VKEY_THETA,         //VKEY_POWER    [01;31m[K-[m[K> VKEY_THETA
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K280[m[K[36m[K:[m[K    VKEY_z,             //VKEY_0        [01;31m[K-[m[K> VKEY_z
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K281[m[K[36m[K:[m[K    VKEY_SPACE,         //VKEY_DOT      [01;31m[K-[m[K> VKEY_SPACE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K282[m[K[36m[K:[m[K    VKEY_QUOTE,         //VKEY_EXP      [01;31m[K-[m[K> VKEY_QUOTE
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K285[m[K[36m[K:[m[K    VKEY_u,             //VKEY_1        [01;31m[K-[m[K> VKEY_u
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K286[m[K[36m[K:[m[K    VKEY_v,             //VKEY_2        [01;31m[K-[m[K> VKEY_v
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K287[m[K[36m[K:[m[K    VKEY_w,             //VKEY_3        [01;31m[K-[m[K> VKEY_w
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K288[m[K[36m[K:[m[K    VKEY_x,             //VKEY_ADD      [01;31m[K-[m[K> VKEY_x
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K289[m[K[36m[K:[m[K    VKEY_y,             //VKEY_SUB      [01;31m[K-[m[K> VKEY_y
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K    VKEY_p,             //VKEY_4        [01;31m[K-[m[K> VKEY_p
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K291[m[K[36m[K:[m[K    VKEY_q,             //VKEY_5        [01;31m[K-[m[K> VKEY_q
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K292[m[K[36m[K:[m[K    VKEY_r,             //VKEY_6        [01;31m[K-[m[K> VKEY_r
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K293[m[K[36m[K:[m[K    VKEY_s,             //VKEY_MUL      [01;31m[K-[m[K> VKEY_s
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K294[m[K[36m[K:[m[K    VKEY_t,             //VKEY_DIV      [01;31m[K-[m[K> VKEY_t
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K295[m[K[36m[K:[m[K    VKEY_m,             //VKEY_7        [01;31m[K-[m[K> VKEY_m
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K296[m[K[36m[K:[m[K    VKEY_n,             //VKEY_8        [01;31m[K-[m[K> VKEY_n
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K297[m[K[36m[K:[m[K    VKEY_o,             //VKEY_9        [01;31m[K-[m[K> VKEY_o
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K298[m[K[36m[K:[m[K    VKEY_UNDO,          //VKEY_DEL      [01;31m[K-[m[K> VKEY_UNDO
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K299[m[K[36m[K:[m[K    VKEY_g,             //VKEY_FRAC     [01;31m[K-[m[K> VKEY_g
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K300[m[K[36m[K:[m[K    VKEY_h,             //VKEY_FD       [01;31m[K-[m[K> VKEY_h
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K301[m[K[36m[K:[m[K    VKEY_i,             //VKEY_LEFTP    [01;31m[K-[m[K> VKEY_i
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K302[m[K[36m[K:[m[K    VKEY_j,             //VKEY_RIGHTP   [01;31m[K-[m[K> VKEY_j
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K303[m[K[36m[K:[m[K    VKEY_k,             //VKEY_COMMA    [01;31m[K-[m[K> VKEY_k
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K304[m[K[36m[K:[m[K    VKEY_l,             //VKEY_ARROW    [01;31m[K-[m[K> VKEY_l
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K305[m[K[36m[K:[m[K    VKEY_a,             //VKEY_XOT      [01;31m[K-[m[K> VKEY_a
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K306[m[K[36m[K:[m[K    VKEY_b,             //VKEY_LOG      [01;31m[K-[m[K> VKEY_b
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K307[m[K[36m[K:[m[K    VKEY_c,             //VKEY_LN       [01;31m[K-[m[K> VKEY_c
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K308[m[K[36m[K:[m[K    VKEY_d,             //VKEY_SIN      [01;31m[K-[m[K> VKEY_d
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K309[m[K[36m[K:[m[K    VKEY_e,             //VKEY_COS      [01;31m[K-[m[K> VKEY_e
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K310[m[K[36m[K:[m[K    VKEY_f,             //VKEY_TAN      [01;31m[K-[m[K> VKEY_f
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K312[m[K[36m[K:[m[K    VKEY_RADIAN,        //VKEY_SQUARE   [01;31m[K-[m[K> VKEY_RADIAN
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K313[m[K[36m[K:[m[K    VKEY_THETA,         //VKEY_POWER    [01;31m[K-[m[K> VKEY_THETA
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K343[m[K[36m[K:[m[K    '[01;31m[K-[m[K',    //VKEY_SUB,
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K657[m[K[36m[K:[m[K        //Return remapped key [01;31m[K-[m[K must be running on PC
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K690[m[K[36m[K:[m[K        //Non[01;31m[K-[m[Kmodifier key pressed
[35m[Ksrc/getkey.c[m[K[36m[K:[m[K[32m[K717[m[K[36m[K:[m[K            return COMMAND_TAB1+key[01;31m[K-[m[KVKEY_F1;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K8[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprocess.h"
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K9[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K30[m[K[36m[K:[m[K        void *dest=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+delete_offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K32[m[K[36m[K:[m[K        uint32_t move_size=(uintptr_t)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index)[01;31m[K-[m[K(uintptr_t)src;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K33[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[K=delete_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K34[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>bytes_left+=delete_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K        struct ForthWordHeader *update_secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K40[m[K[36m[K:[m[K        while (update_secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K44[m[K[36m[K:[m[K            log_text("  name: %s\n",update_secondary[01;31m[K-[m[K>name);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K45[m[K[36m[K:[m[K            log_text("  address: %p\n",update_secondary[01;31m[K-[m[K>address);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K            log_text("  offset: %p\n",update_secondary[01;31m[K-[m[K>offset);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[K            if (update_secondary[01;31m[K-[m[K>address>(void(**)(struct ForthEngine *))dest)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K54[m[K[36m[K:[m[K                update_secondary[01;31m[K-[m[K>address=(void(**)(struct ForthEngine *))((uint8_t *)update_secondary[01;31m[K-[m[K>address[01;31m[K-[m[Kdelete_size);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K55[m[K[36m[K:[m[K                update_secondary[01;31m[K-[m[K>offset[01;31m[K-[m[K=delete_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K58[m[K[36m[K:[m[K                log_text("  new address: %p\n",update_secondary[01;31m[K-[m[K>address);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K                log_text("  new offset: %p\n",update_secondary[01;31m[K-[m[K>offset);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K71[m[K[36m[K:[m[K        //Delete size is 0 [01;31m[K-[m[K nothing to do
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K91[m[K[36m[K:[m[K        //Word already exists [01;31m[K-[m[K mark existing code for this word for deletion
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K        uint32_t delete_offset=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K93[m[K[36m[K:[m[K        uint32_t delete_size=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K95[m[K[36m[K:[m[K        //Save address of re[01;31m[K-[m[Kused word header for processing later
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K96[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word=compile[01;31m[K-[m[K>secondary;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K97[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_index=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>ID;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K100[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>address=(void(**)(struct ForthEngine *))(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K102[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size=0;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K103[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>type=secondary_type;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K111[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header+compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K112[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_index=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K114[m[K[36m[K:[m[K        //Word not found [01;31m[K-[m[K create header for new word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K137[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K word of source is longer than allowed
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K139[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K144[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K no word name after primitive
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K145[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+prior_start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K163[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+arg_start;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K//Helper function [01;31m[K-[m[K use print_color if it exists and print otherwise
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print_color!=NULL) engine[01;31m[K-[m[K>print_color(text,color);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K177[m[K[36m[K:[m[K    else if (engine[01;31m[K-[m[K>print!=NULL) engine[01;31m[K-[m[K>print(text);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K//Actions [01;31m[K-[m[K triggered in primitive and handled here to avoid platform specific code in primitives
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K209[m[K[36m[K:[m[K    int32_t offset=[01;31m[K-[m[K(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K219[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K238[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+prior_start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K259[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>in_bracket==true)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K264[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K not allowed after [ while defining word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K265[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K282[m[K[36m[K:[m[K        log_text("  offset: %d\n",compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K283[m[K[36m[K:[m[K        log_text("  definition_size: %d\n",compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K285[m[K[36m[K:[m[K        //Word already exists [01;31m[K-[m[K mark existing code for this word for deletion in semicolon 
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K287[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>delete_offset=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K288[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>delete_size=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K        //Save address of re[01;31m[K-[m[Kused word header for processing later
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K291[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word=compile[01;31m[K-[m[K>secondary;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K292[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_index=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>ID;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K293[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_exists=true;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K296[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>save_offset=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K297[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>save_definition_size=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K298[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>save_type=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>type;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K301[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>address=(void(**)(struct ForthEngine *))(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K302[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K303[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size=0;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K304[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>type=FORTH_SECONDARY_WORD;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K312[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header+compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K313[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_index=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K315[m[K[36m[K:[m[K        //No definition deleted to make room for new word [01;31m[K-[m[K let semicolon know nothing to delete
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K316[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>colon_word_exists=false;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K318[m[K[36m[K:[m[K        //Word not found [01;31m[K-[m[K create header for new word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K324[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>state=FORTH_STATE_COMPILE;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K339[m[K[36m[K:[m[K            //Reached end of line or of string [01;31m[K-[m[K comment ended
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K351[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>in_bracket==true)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K356[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K not allowed after [ while defining word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K357[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K361[m[K[36m[K:[m[K    //Extract word name, len, and type. Also, catch errors [01;31m[K-[m[K no name, name too long, name not primary or secondary.
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K390[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>in_bracket==true)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K395[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K not allowed after [ while defining word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K396[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K400[m[K[36m[K:[m[K    //Extract word name, len, and type. Also, catch errors [01;31m[K-[m[K no name, name too long, name not primary or secondary.
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K412[m[K[36m[K:[m[K    uint32_t variable_address=align4(engine[01;31m[K-[m[K>data_index)&engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K413[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=variable_address;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K435[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K462[m[K[36m[K:[m[K            //Matching " found [01;31m[K-[m[K done printing
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K467[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K reached end of string with no terminating "
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K468[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>error_word=source+prior_start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K482[m[K[36m[K:[m[K                if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K484[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>print(buffer);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K492[m[K[36m[K:[m[K    if ((engine[01;31m[K-[m[K>update_screen!=NULL)&&(characters_printed)) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K521[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K532[m[K[36m[K:[m[K    uint32_t offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K533[m[K[36m[K:[m[K    *(uint32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+popped_element.index)=offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K542[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K543[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K544[m[K[36m[K:[m[K    uint32_t word_ID=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K550[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>primitive_ID=word_ID;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K552[m[K[36m[K:[m[K    else if (word_ID<forth_primitives_len+compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K556[m[K[36m[K:[m[K        uint32_t secondary_id=word_ID[01;31m[K-[m[Kforth_primitives_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K557[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>secondary=&compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header[secondary_id];
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K561[m[K[36m[K:[m[K        text_uint32(word_ID,engine[01;31m[K-[m[K>error_num);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K584[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K610[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K LEAVE must appear within DO/LOOP or DO/+LOOP
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K619[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K654[m[K[36m[K:[m[K            int32_t offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K661[m[K[36m[K:[m[K            *(int32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+popped_element.index)=offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K670[m[K[36m[K:[m[K            int32_t offset=[01;31m[K-[m[K(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K674[m[K[36m[K:[m[K            //Done searching [01;31m[K-[m[K break out of while loop
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K695[m[K[36m[K:[m[K            //Matching ) found [01;31m[K-[m[K comment ended
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K728[m[K[36m[K:[m[K            int32_t offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K735[m[K[36m[K:[m[K            *(int32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+popped_element.index)=offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K744[m[K[36m[K:[m[K            int32_t offset=[01;31m[K-[m[K(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K748[m[K[36m[K:[m[K            //Done searching [01;31m[K-[m[K break out of while loop
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K769[m[K[36m[K:[m[K    if ((engine[01;31m[K-[m[K>print_color==NULL)&&(engine[01;31m[K-[m[K>print==NULL))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K837[m[K[36m[K:[m[K            if ((engine[01;31m[K-[m[K>screen_width>0)&&(*line_characters+word_len+1>=engine[01;31m[K-[m[K>screen_width))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K861[m[K[36m[K:[m[K    if ((engine[01;31m[K-[m[K>update_screen!=NULL)&&(redraw==true)) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K879[m[K[36m[K:[m[K    uint32_t address=engine[01;31m[K-[m[K>data_index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K888[m[K[36m[K:[m[K    uint32_t length_index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K923[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K reached end of string with no terminating "
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K924[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>error_word=source+prior_start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K942[m[K[36m[K:[m[K                //Matching " found [01;31m[K-[m[K done looping
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K949[m[K[36m[K:[m[K                    log_text("address: %p\n",compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K952[m[K[36m[K:[m[K                    *(uint32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+length_index)=bytes_written;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K956[m[K[36m[K:[m[K                    int padding_count=(ptr_size[01;31m[K-[m[K(bytes_written%ptr_size))%ptr_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K970[m[K[36m[K:[m[K                    log_text("address: %p\n",compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K974[m[K[36m[K:[m[K                    //Writing to data memory [01;31m[K-[m[K write return values
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K975[m[K[36m[K:[m[K                    *engine[01;31m[K-[m[K>stack=address;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K977[m[K[36m[K:[m[K                    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K978[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K979[m[K[36m[K:[m[K                    *engine[01;31m[K-[m[K>stack=bytes_written;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K980[m[K[36m[K:[m[K                    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K981[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K998[m[K[36m[K:[m[K                    //Character to print [01;31m[K-[m[K set flag and write below
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1014[m[K[36m[K:[m[K                    //Escape codes from Forth standard [01;31m[K-[m[K including all even if not used
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1049[m[K[36m[K:[m[K                            //double[01;31m[K-[m[Kquote
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1069[m[K[36m[K:[m[K                            //double[01;31m[K-[m[Kquote
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1086[m[K[36m[K:[m[K                if ((character>='0')&&(character<='9')) new_value=character[01;31m[K-[m[K'0';
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1087[m[K[36m[K:[m[K                else if ((character>='A')&&(character<='F')) new_value=character[01;31m[K-[m[K'A'+10;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1088[m[K[36m[K:[m[K                else if ((character>='a')&&(character<='f')) new_value=character[01;31m[K-[m[K'a'+10;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1131[m[K[36m[K:[m[K                log_text("writing to index %d (size: %d)\n",engine[01;31m[K-[m[K>data_index,engine[01;31m[K-[m[K>data_size);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1134[m[K[36m[K:[m[K                *(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=character;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1138[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(character))&engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1143[m[K[36m[K:[m[K                *(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=character2;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1147[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(character))&engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1183[m[K[36m[K:[m[K    int32_t offset=[01;31m[K-[m[K(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kbegin_element.index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1188[m[K[36m[K:[m[K    offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kwhile_element.index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1189[m[K[36m[K:[m[K    *(int32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+while_element.index)=offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1197[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1198[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1201[m[K[36m[K:[m[K    uint32_t data_size=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1204[m[K[36m[K:[m[K    if (data_size>(engine[01;31m[K-[m[K>data_size+heap_left()))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1207[m[K[36m[K:[m[K        text_uint32(data_size,engine[01;31m[K-[m[K>error_num);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1215[m[K[36m[K:[m[K        text_uint32(FORTH_MEM_DATA_MIN,engine[01;31m[K-[m[K>error_num);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1229[m[K[36m[K:[m[K                text_uint32(data_size,engine[01;31m[K-[m[K>error_num);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1238[m[K[36m[K:[m[K    int result=resize_object(data_size,FORTH_ID_DATA,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1267[m[K[36m[K:[m[K    if ((engine[01;31m[K-[m[K>print_color==NULL)&&(engine[01;31m[K-[m[K>print==NULL))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1290[m[K[36m[K:[m[K                struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1292[m[K[36m[K:[m[K                while(secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1294[m[K[36m[K:[m[K                    if ((secondary[01;31m[K-[m[K>type!=FORTH_SECONDARY_UNDEFINED)==defined)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1296[m[K[36m[K:[m[K                        //Word matches type of word searching for [01;31m[K-[m[K defined or undefined
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1300[m[K[36m[K:[m[K                            word_name=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1301[m[K[36m[K:[m[K                            word_len=secondary[01;31m[K-[m[K>name_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1306[m[K[36m[K:[m[K                            if (strcasecmp(word_name,secondary[01;31m[K-[m[K>name)>0)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1308[m[K[36m[K:[m[K                                word_name=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1309[m[K[36m[K:[m[K                                word_len=secondary[01;31m[K-[m[K>name_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1318[m[K[36m[K:[m[K                    //No match words found [01;31m[K-[m[K done searching
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1331[m[K[36m[K:[m[K                struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1333[m[K[36m[K:[m[K                while(secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1335[m[K[36m[K:[m[K                    if ((secondary[01;31m[K-[m[K>type!=FORTH_SECONDARY_UNDEFINED)==defined)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1337[m[K[36m[K:[m[K                        //Word matches type of word searching for [01;31m[K-[m[K defined or undefined
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1338[m[K[36m[K:[m[K                        if (strcasecmp(word_name,secondary[01;31m[K-[m[K>name)<0)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1342[m[K[36m[K:[m[K                                test_name=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1343[m[K[36m[K:[m[K                                word_len=secondary[01;31m[K-[m[K>name_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1345[m[K[36m[K:[m[K                            else if (strcasecmp(test_name,secondary[01;31m[K-[m[K>name)>0)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1347[m[K[36m[K:[m[K                                test_name=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1348[m[K[36m[K:[m[K                                word_len=secondary[01;31m[K-[m[K>name_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1358[m[K[36m[K:[m[K                    //Done outputting secondaries [01;31m[K-[m[K stop looping
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1368[m[K[36m[K:[m[K            if ((engine[01;31m[K-[m[K>screen_width>0)&&(*line_characters+word_len+1>=engine[01;31m[K-[m[K>screen_width))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1395[m[K[36m[K:[m[K    if ((engine[01;31m[K-[m[K>update_screen!=NULL)&&(redraw==true)) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1402[m[K[36m[K:[m[K    log_text("name: %s\n",compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>name);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1403[m[K[36m[K:[m[K    log_text("size: %d\n",compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1406[m[K[36m[K:[m[K    if (compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index!=0)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1410[m[K[36m[K:[m[K        //TODO: accounted for all control types? double check forth[01;31m[K-[m[Kprocess.h
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1437[m[K[36m[K:[m[K    //the search here may needlessly re[01;31m[K-[m[Kmark a lot of headers done. Redefining a word is relatively rare so leave as is.) 
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1438[m[K[36m[K:[m[K    struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>colon_word;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1441[m[K[36m[K:[m[K    while(secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1443[m[K[36m[K:[m[K        secondary[01;31m[K-[m[K>done=true;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1448[m[K[36m[K:[m[K    if ((compile[01;31m[K-[m[K>colon_word_exists==true)&&(compile[01;31m[K-[m[K>delete_size!=0))
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1451[m[K[36m[K:[m[K        action_compact(compile[01;31m[K-[m[K>delete_offset,compile[01;31m[K-[m[K>delete_size,compile);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1455[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>state=FORTH_STATE_INTERPRET;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1456[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>in_bracket=false;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1486[m[K[36m[K:[m[K    int32_t offset=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1487[m[K[36m[K:[m[K    *(int32_t *)(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+popped_element.index)=offset;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1502[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K word of source is longer than allowed
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1504[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1509[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K no word name after '
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1510[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+prior_start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1528[m[K[36m[K:[m[K        *index=compile[01;31m[K-[m[K>primitive_ID;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1537[m[K[36m[K:[m[K        *index=forth_primitives_len+compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>ID;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1542[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K can only get ID of primitive or secondary not number or anything else
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1543[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1569[m[K[36m[K:[m[K    //Write primitive that jumps to BEGIN if not true [01;31m[K-[m[K same behavior as IF
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1574[m[K[36m[K:[m[K    int32_t offset=[01;31m[K-[m[K(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index[01;31m[K-[m[Kpopped_element.index);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1586[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>in_bracket==true)
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1591[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K not allowed after [ while defining word
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1592[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start[01;31m[K-[m[Kcompile[01;31m[K-[m[K>word_len;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1596[m[K[36m[K:[m[K    //Extract word name, len, and type. Also, catch errors [01;31m[K-[m[K no name, name too long, name not primary or secondary.
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1608[m[K[36m[K:[m[K    uint32_t variable_address=align4(engine[01;31m[K-[m[K>data_index)&engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1609[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(variable_address+sizeof(int32_t))&engine[01;31m[K-[m[K>data_mask_32; 
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1648[m[K[36m[K:[m[K    //Write primitive that performs WHILE function [01;31m[K-[m[K same behavior as IF
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1653[m[K[36m[K:[m[K    uint32_t index=compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>index;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1677[m[K[36m[K:[m[K        *engine[01;31m[K-[m[K>stack=compile[01;31m[K-[m[K>secondary[01;31m[K-[m[K>definition_size;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1679[m[K[36m[K:[m[K        lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1680[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1685[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K type is FORTH_TYPE_NOT_FOUND. All other errors caught above by action_source_pre.
[35m[Ksrc/forth-actions.c[m[K[36m[K:[m[K[32m[K1686[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>error_word=source+*start[01;31m[K-[m[Kword_len;
[35m[Ksrc/error.h[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K        //error_exit [01;31m[K-[m[K fatal, stop executing
[35m[Ksrc/error.h[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K        //error_screen [01;31m[K-[m[K not fatal, show screen then return to menu
[35m[Ksrc/macros.h[m[K[36m[K:[m[K[32m[K1[m[K[36m[K:[m[K//Useful C macros [01;31m[K-[m[K not specific to one project
[35m[Ksrc/macros.h[m[K[36m[K:[m[K[32m[K10[m[K[36m[K:[m[K    //Mark function argument as unused to silence warnings from [01;31m[K-[m[KWunused[01;31m[K-[m[Kparameter
[35m[Ksrc/macros.h[m[K[36m[K:[m[K[32m[K14[m[K[36m[K:[m[K    #define fldsiz(name, member) (sizeof(((struct name *)0)[01;31m[K-[m[K>member))
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K10[m[K[36m[K:[m[K    //Dimensions (may change [01;31m[K-[m[K see manager.h):
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K11[m[K[36m[K:[m[K    //[01;31m[K-[m[K Whole:  388x204 [01;31m[K-[m[K 64 chars, 4 pixels x 22 rows, 6 pixels (or 20 rows, 4 pixels)
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K12[m[K[36m[K:[m[K    //[01;31m[K-[m[K Vsplit: 388x100 [01;31m[K-[m[K 64 chars, 4 pixels x 11 rows, 1 pixel  (or 10 rows, 0 pixels)
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K    //[01;31m[K-[m[K Hsplit: 192x204 [01;31m[K-[m[K 31 chars, 6 pixels x 22 rows, 6 pixels (or 20 rows, 4 pixels)
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K19[m[K[36m[K:[m[K    //#define CONS_WHOLE_Y        2 //Equal space above and below console [01;31m[K-[m[K top text doesn't line up with vertical split
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K    #define CONS_WHOLE_Y        0   //Top text lines up with vertical split [01;31m[K-[m[K space above and below console not equal
[35m[Ksrc/console.h[m[K[36m[K:[m[K[32m[K42[m[K[36m[K:[m[K        struct ConsoleChar *text;   //Zero[01;31m[K-[m[Kterminated string
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K1[m[K[36m[K:[m[K//TODO: still need all of these? split off from key[01;31m[K-[m[Kremap.h
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K    {SDL_SCANCODE_1,    MODIFIER_SHIFT_NONE,    VKEY_EXCLAMATION},  //1 [01;31m[K-[m[K> !
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K95[m[K[36m[K:[m[K    {SDL_SCANCODE_2,    MODIFIER_SHIFT_NONE,    VKEY_AT},           //2 [01;31m[K-[m[K> @
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K98[m[K[36m[K:[m[K    {SDL_SCANCODE_3,    MODIFIER_SHIFT_NONE,    VKEY_HASH},         //3 [01;31m[K-[m[K> #
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K    {SDL_SCANCODE_4,    MODIFIER_SHIFT_NONE,    VKEY_DOLLAR},       //4 [01;31m[K-[m[K> $
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K104[m[K[36m[K:[m[K    {SDL_SCANCODE_5,    MODIFIER_SHIFT_NONE,    VKEY_PERCENT},      //5 [01;31m[K-[m[K> %
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K107[m[K[36m[K:[m[K    {SDL_SCANCODE_6,    MODIFIER_SHIFT_NONE,    VKEY_POWER},        //6 [01;31m[K-[m[K> ^
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K    {SDL_SCANCODE_7,    MODIFIER_SHIFT_NONE,    VKEY_AMPERSAND},    //7 [01;31m[K-[m[K> &
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K113[m[K[36m[K:[m[K    {SDL_SCANCODE_8,    MODIFIER_SHIFT_NONE,    VKEY_MUL},          //8 [01;31m[K-[m[K> *
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K    {SDL_SCANCODE_9,    MODIFIER_SHIFT_NONE,    VKEY_LEFTP},        //9 [01;31m[K-[m[K> (
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K119[m[K[36m[K:[m[K    {SDL_SCANCODE_0,    MODIFIER_SHIFT_NONE,    VKEY_RIGHTP},       //0 [01;31m[K-[m[K> )
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K121[m[K[36m[K:[m[K    //Unshifted tab varies by program [01;31m[K-[m[K see remappings below
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K122[m[K[36m[K:[m[K    {SDL_SCANCODE_TAB,  MODIFIER_SHIFT_NONE,    VKEY_FRAC},         //Tab [01;31m[K-[m[K> fraction key
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K129[m[K[36m[K:[m[K    {SDL_SCANCODE_MINUS,        MODIFIER_NONE,          VKEY_SUB},          //[01;31m[K-[m[K
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K    {SDL_SCANCODE_MINUS,        MODIFIER_ALPHA_LOWER,   VKEY_SUB},          //[01;31m[K-[m[K
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K131[m[K[36m[K:[m[K    {SDL_SCANCODE_MINUS,        MODIFIER_ALPHA_UPPER,   VKEY_SUB},          //[01;31m[K-[m[K
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K132[m[K[36m[K:[m[K    {SDL_SCANCODE_MINUS,        MODIFIER_SHIFT_NONE,    VKEY_UNDERSCORE},   //[01;31m[K-[m[K [01;31m[K-[m[K> _
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K136[m[K[36m[K:[m[K    {SDL_SCANCODE_EQUALS,       MODIFIER_SHIFT_NONE,    VKEY_ADD},          //= [01;31m[K-[m[K> +
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K140[m[K[36m[K:[m[K    {SDL_SCANCODE_LEFTBRACKET,  MODIFIER_SHIFT_NONE,    VKEY_LCBRACKET},    //[ [01;31m[K-[m[K> {
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K144[m[K[36m[K:[m[K    {SDL_SCANCODE_RIGHTBRACKET, MODIFIER_SHIFT_NONE,    VKEY_RCBRACKET},    //] [01;31m[K-[m[K> }
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K148[m[K[36m[K:[m[K    {SDL_SCANCODE_BACKSLASH,    MODIFIER_SHIFT_NONE,    VKEY_PIPE},         //Backslash [01;31m[K-[m[K> |
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K152[m[K[36m[K:[m[K    {SDL_SCANCODE_SEMICOLON,    MODIFIER_SHIFT_NONE,    VKEY_COLON},        //; [01;31m[K-[m[K> :
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K156[m[K[36m[K:[m[K    {SDL_SCANCODE_APOSTROPHE,   MODIFIER_SHIFT_NONE,    VKEY_QUOTE},        //' [01;31m[K-[m[K> "
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K160[m[K[36m[K:[m[K    {SDL_SCANCODE_COMMA,        MODIFIER_SHIFT_NONE,    VKEY_LESS_THAN},    //, [01;31m[K-[m[K> <
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K164[m[K[36m[K:[m[K    {SDL_SCANCODE_PERIOD,       MODIFIER_SHIFT_NONE,    VKEY_GREATER_THAN}, //. [01;31m[K-[m[K> >
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K168[m[K[36m[K:[m[K    {SDL_SCANCODE_SLASH,        MODIFIER_SHIFT_NONE,    VKEY_QUESTION},     // / [01;31m[K-[m[K> ?
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K    //Marks end of list [01;31m[K-[m[K DO NOT REMOVE!
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[K    {SDL_SCANCODE_TAB,  MODIFIER_NONE,          VKEY_ARROW},        //Tab [01;31m[K-[m[K> arrow
[35m[Ksrc/key-remap-pc.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K    //Marks end of list [01;31m[K-[m[K DO NOT REMOVE!
[35m[Ksrc/forth-process.h[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/custom/gcc-15/test.c[m[K[36m[K:[m[K[32m[K10[m[K[36m[K:[m[K    __attribute__((musttail)) return (*engine[01;31m[K-[m[K>address)(engine);
[35m[Ksrc/custom/notes.txt[m[K[36m[K:[m[K[32m[K3[m[K[36m[K:[m[Kgcc[01;31m[K-[m[K15/
[35m[Ksrc/custom/notes.txt[m[K[36m[K:[m[K[32m[K4[m[K[36m[K:[m[K[01;31m[K-[m[K compile with newer gcc 15 in container for __attribute__((musttail))
[35m[Ksrc/custom/notes.txt[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K[01;31m[K-[m[K place for assembly files generated from C files in gcc[01;31m[K-[m[K15/
[35m[Ksrc/custom/generated/test.s[m[K[36m[K:[m[K[32m[K11[m[K[36m[K:[m[K	.size	_asm_test, .[01;31m[K-[m[K_asm_test
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K79[m[K[36m[K:[m[K                //Free memory [01;31m[K-[m[K each program function selects own heap even if doesn't use
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K104[m[K[36m[K:[m[K                selected_window=return_command[01;31m[K-[m[KCOMMAND_TAB1;
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K107[m[K[36m[K:[m[K                //Fraction key [01;31m[K-[m[K switch selected window split
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K194[m[K[36m[K:[m[K    title_buffer[TAB_TITLE_LEN[01;31m[K-[m[K1]=0;
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K203[m[K[36m[K:[m[K        for (int j=0;j<TAB_TITLE_LEN[01;31m[K-[m[K3;j++)
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K226[m[K[36m[K:[m[K        draw_rect(BORDER_X+j,BORDER_Y+j,DWIDTH[01;31m[K-[m[Kj*2,DHEIGHT[01;31m[K-[m[Kj*2[01;31m[K-[m[KBORDER_Y,manager_colors[selected_window],[01;31m[K-[m[K1);
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K241[m[K[36m[K:[m[K            draw_rect(SEL_VSPLIT_X,SEL_VSPLIT_Y0,SEL_VSPLIT_WIDTH,SEL_VSPLIT_HEIGHT,SEL_COLOR,[01;31m[K-[m[K1);
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K246[m[K[36m[K:[m[K            draw_rect(SEL_VSPLIT_X,SEL_VSPLIT_Y1,SEL_VSPLIT_WIDTH,SEL_VSPLIT_HEIGHT,SEL_COLOR,[01;31m[K-[m[K1);
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K261[m[K[36m[K:[m[K            draw_rect(SEL_HSPLIT_X0,SEL_HSPLIT_Y,SEL_HSPLIT_WIDTH,SEL_HSPLIT_HEIGHT,SEL_COLOR,[01;31m[K-[m[K1);
[35m[Ksrc/manager.c[m[K[36m[K:[m[K[32m[K266[m[K[36m[K:[m[K            draw_rect(SEL_HSPLIT_X1,SEL_HSPLIT_Y,SEL_HSPLIT_WIDTH,SEL_HSPLIT_HEIGHT,SEL_COLOR,[01;31m[K-[m[K1);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K                        //ie shift by 32 but causes warning on sh[01;31m[K-[m[Kgcc
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K125[m[K[36m[K:[m[K            printf("[01;31m[K-[m[K Size:  %d\n",size);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K126[m[K[36m[K:[m[K            printf("[01;31m[K-[m[K Tab:   %d\n",ptr[HEAP_TAB]);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K127[m[K[36m[K:[m[K            printf("[01;31m[K-[m[K Split: %d\n",ptr[HEAP_SPLIT]);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K138[m[K[36m[K:[m[K                    printf("[01;31m[K-[m[K Tab object. Size: %d \n",*tab_ptr);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K142[m[K[36m[K:[m[K            if (level==0) printf("[01;31m[K-[m[K Tab objects: %d\n",counter);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K143[m[K[36m[K:[m[K            printf("[01;31m[K-[m[K End\n\n");
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K163[m[K[36m[K:[m[K            if ((i%col_count==(col_count[01;31m[K-[m[K1))||(i==count[01;31m[K-[m[K1))
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K                    if (j!=char_index[01;31m[K-[m[K1) printf(".");
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K185[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K        while (secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K188[m[K[36m[K:[m[K            printf("[01;31m[K-[m[K target: %p [01;31m[K-[m[K %s. base: %p\n",secondary[01;31m[K-[m[K>address,secondary[01;31m[K-[m[K>name,secondary);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K214[m[K[36m[K:[m[K                printf("[01;31m[K-[m[K index: %d\n",index);
[35m[Ksrc/debug.c[m[K[36m[K:[m[K[32m[K215[m[K[36m[K:[m[K                printf("[01;31m[K-[m[K %s",compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header[index].name);
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K                //ON key was pressed [01;31m[K-[m[K halt interpreter if one is running
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K70[m[K[36m[K:[m[K        //Menu functionality so add[01;31m[K-[m[Kin doesn't crash if calculator left off for too long
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K125[m[K[36m[K:[m[K        time[01;31m[K-[m[K>elapsed+=*prof_tcnt;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K        time[01;31m[K-[m[K>elapsed[01;31m[K-[m[K=*prof_tcnt;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K145[m[K[36m[K:[m[K    #include "key[01;31m[K-[m[Kremap[01;31m[K-[m[Kpc.h"
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K174[m[K[36m[K:[m[K        //For program specific key remapping of keys on calculator independent of PC, see key[01;31m[K-[m[Kremap.c
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K378[m[K[36m[K:[m[K        uintptr_t xram_diff=XRAM_SIZE[01;31m[K-[m[K((uintptr_t)(xram_base))%XRAM_SIZE;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K390[m[K[36m[K:[m[K        uintptr_t yram_diff=YRAM_SIZE[01;31m[K-[m[K((uintptr_t)(yram_base))%YRAM_SIZE;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K413[m[K[36m[K:[m[K        renderer=SDL_CreateRenderer(window,[01;31m[K-[m[K1,SDL_RENDERER_ACCELERATED);
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K484[m[K[36m[K:[m[K            if ((conversions[01;31m[K-[m[K>key==0)&&(conversions[01;31m[K-[m[K>modifier==0))
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K486[m[K[36m[K:[m[K                //End of list [01;31m[K-[m[K no conversion found
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K489[m[K[36m[K:[m[K            else if ((conversions[01;31m[K-[m[K>key==key)&&(conversions[01;31m[K-[m[K>modifier==modifier))
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K492[m[K[36m[K:[m[K                return conversions[01;31m[K-[m[K>new_key;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K504[m[K[36m[K:[m[K            //Conversion found [01;31m[K-[m[K done searching
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K518[m[K[36m[K:[m[K        if (strlen(result_path)>local_path_max[01;31m[K-[m[K1) return NULL;
[35m[Ksrc/compatibility.c[m[K[36m[K:[m[K[32m[K533[m[K[36m[K:[m[K        return (stop.tv_sec[01;31m[K-[m[Ktime[01;31m[K-[m[K>tv_sec)*1000000+(stop.tv_nsec[01;31m[K-[m[Ktime[01;31m[K-[m[K>tv_nsec)/1000;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K4[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kcompatibility.h"
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap.h"
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap[01;31m[K-[m[Kpc.h"
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K    console_text(text,color,forth_console[01;31m[K-[m[K>text_col_bg,forth_console);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K33[m[K[36m[K:[m[K        //No characters written [01;31m[K-[m[K return 0
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K34[m[K[36m[K:[m[K        //IMPORTANT [01;31m[K-[m[K no need to jump to restore_exit below to restore console input since haven't diverted input yet
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K42[m[K[36m[K:[m[K    struct ConsoleInput input_copy=forth_console[01;31m[K-[m[K>input;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K    int input_text_max_copy=forth_console[01;31m[K-[m[K>input_text_max;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K46[m[K[36m[K:[m[K    if (max_chars>FORTH_ACCEPT_MAX) forth_console[01;31m[K-[m[K>input_text_max=FORTH_ACCEPT_MAX;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K    else forth_console[01;31m[K-[m[K>input_text_max=max_chars;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K49[m[K[36m[K:[m[K    //Add space for zero terminator [01;31m[K-[m[K not used by Forth but expected by input line functions
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K    forth_console[01;31m[K-[m[K>input_text_max++;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K53[m[K[36m[K:[m[K    //+1 for zero terminator [01;31m[K-[m[K not used by Forth but required by console input functions
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K54[m[K[36m[K:[m[K    struct ConsoleChar *text_buffer=malloc(sizeof(struct ConsoleChar)*forth_console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K58[m[K[36m[K:[m[K    struct ConsoleInput *input_line=&forth_console[01;31m[K-[m[K>input;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K    input_line[01;31m[K-[m[K>text=text_buffer;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K    input_line[01;31m[K-[m[K>text[0].character=0;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K61[m[K[36m[K:[m[K    input_line[01;31m[K-[m[K>len=0;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K    input_line[01;31m[K-[m[K>cursor=0;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K    input_line[01;31m[K-[m[K>visible=true;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K71[m[K[36m[K:[m[K        if (redraw_modifier) draw_modifier(forth_console[01;31m[K-[m[K>modifier);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K81[m[K[36m[K:[m[K        int old_modifier=forth_console[01;31m[K-[m[K>modifier;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K82[m[K[36m[K:[m[K        int key=getkey_text(true,&forth_console[01;31m[K-[m[K>modifier,forth_keys);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K88[m[K[36m[K:[m[K        if (old_modifier!=forth_console[01;31m[K-[m[K>modifier) redraw_modifier=true;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K95[m[K[36m[K:[m[K            //Printable character [01;31m[K-[m[K add to input line
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K96[m[K[36m[K:[m[K            add_input_char(character,forth_console[01;31m[K-[m[K>input_col_fg,forth_console[01;31m[K-[m[K>input_col_bg,forth_console);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K109[m[K[36m[K:[m[K                    //DEL with alpha active [01;31m[K-[m[K treat as DEL so don't need to remove alpha to delete
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K                    for (uint32_t i=0;i<forth_console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K118[m[K[36m[K:[m[K                        console_char(forth_console[01;31m[K-[m[K>input.text[i].character,forth_console[01;31m[K-[m[K>input.text[i].fg,forth_console[01;31m[K-[m[K>input.text[i].bg,forth_console);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K121[m[K[36m[K:[m[K                    for (uint32_t i=0;i<forth_console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K126[m[K[36m[K:[m[K                        *(text_base+text_address)=input_line[01;31m[K-[m[K>text[i].character;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K129[m[K[36m[K:[m[K                    bytes_written=forth_console[01;31m[K-[m[K>input.len;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K142[m[K[36m[K:[m[K        forth_console[01;31m[K-[m[K>input=input_copy;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K143[m[K[36m[K:[m[K        forth_console[01;31m[K-[m[K>input_text_max=input_text_max_copy;
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K150[m[K[36m[K:[m[K    int key=getkey_text(blocking,&forth_console[01;31m[K-[m[K>modifier,forth_keys);
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K158[m[K[36m[K:[m[K        //Key out of range [01;31m[K-[m[K return 0
[35m[Ksrc/forth-compatibility.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    draw_modifier(forth_console[01;31m[K-[m[K>modifier);
[35m[Ksrc/util.c[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K    return value+((4[01;31m[K-[m[Kvalue%4)%4);
[35m[Ksrc/forth-actions.h[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/forth-actions.h[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kprocess.h"
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K    ///Colors [01;31m[K-[m[K modifiers
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K14[m[K[36m[K:[m[K    //Colors [01;31m[K-[m[K tabs
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K    #define BORDER_VSPLIT_X1    (DWIDTH[01;31m[K-[m[KBORDER_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K40[m[K[36m[K:[m[K    #define BORDER_VSPLIT_Y     (BORDER_Y+(DHEIGHT[01;31m[K-[m[KBORDER_Y)/2[01;31m[K-[m[KBORDER_SIZE/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K41[m[K[36m[K:[m[K    #define BORDER_HSPLIT_X     (BORDER_X+(DWIDTH[01;31m[K-[m[KBORDER_X)/2[01;31m[K-[m[KBORDER_SIZE/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K    #define BORDER_HSPLIT_Y1    (DHEIGHT[01;31m[K-[m[KBORDER_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K49[m[K[36m[K:[m[K    #define SEL_VSPLIT_Y1       (TAB_HEIGHT+(DHEIGHT[01;31m[K-[m[KTAB_HEIGHT)/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K    #define SEL_VSPLIT_WIDTH    (DWIDTH[01;31m[K-[m[K4)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K51[m[K[36m[K:[m[K    #define SEL_VSPLIT_HEIGHT   ((DHEIGHT[01;31m[K-[m[KTAB_HEIGHT)/2[01;31m[K-[m[K2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K55[m[K[36m[K:[m[K    #define SEL_HSPLIT_WIDTH    (DWIDTH/2[01;31m[K-[m[K2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K56[m[K[36m[K:[m[K    #define SEL_HSPLIT_HEIGHT   ((DHEIGHT[01;31m[K-[m[KTAB_HEIGHT)[01;31m[K-[m[K4)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K    #define WINDOW_WHOLE_X1     (DWIDTH[01;31m[K-[m[KBORDER_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K61[m[K[36m[K:[m[K    #define WINDOW_WHOLE_WIDTH  (WINDOW_WHOLE_X1[01;31m[K-[m[KWINDOW_WHOLE_X0+1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K    #define WINDOW_WHOLE_Y1     (DHEIGHT[01;31m[K-[m[KBORDER_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K    #define WINDOW_WHOLE_HEIGHT (WINDOW_WHOLE_Y1[01;31m[K-[m[KWINDOW_WHOLE_Y0+1)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K70[m[K[36m[K:[m[K    #define WINDOW_VSPLIT_TOP_Y1        (TAB_HEIGHT+(DHEIGHT[01;31m[K-[m[KTAB_HEIGHT)/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K71[m[K[36m[K:[m[K    #define WINDOW_VSPLIT_HEIGHT        ((DHEIGHT[01;31m[K-[m[KTAB_HEIGHT[01;31m[K-[m[KBORDER_SIZE*3)/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K72[m[K[36m[K:[m[K    #define WINDOW_VSPLIT_BOTTOM_Y0     (DHEIGHT[01;31m[K-[m[KWINDOW_VSPLIT_HEIGHT[01;31m[K-[m[KBORDER_SIZE) 
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K75[m[K[36m[K:[m[K    #define WINDOW_HSPLIT_WIDTH         ((DWIDTH[01;31m[K-[m[KBORDER_SIZE*3)/2)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K78[m[K[36m[K:[m[K    #define WINDOW_HSPLIT_RIGHT_X0      (DWIDTH[01;31m[K-[m[KBORDER_SIZE[01;31m[K-[m[KWINDOW_HSPLIT_WIDTH)
[35m[Ksrc/manager.h[m[K[36m[K:[m[K[32m[K79[m[K[36m[K:[m[K    #define WINDOW_HSPLIT_RIGHT_X1      (DWIDTH[01;31m[K-[m[KBORDER_SIZE)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K26[m[K[36m[K:[m[K    0x08,0x08,0x08,0x08,0x08,             // [01;31m[K-[m[K
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    //Exit early and don't draw spacing[01;31m[K-[m[Kwide vertical column if no characters to draw
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K214[m[K[36m[K:[m[K    //Draw one spacing[01;31m[K-[m[Kwide vertical column before first character
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K220[m[K[36m[K:[m[K            if (bg!=[01;31m[K-[m[K1)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K231[m[K[36m[K:[m[K        screen+=DWIDTH[01;31m[K-[m[Khorz_spacing;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K235[m[K[36m[K:[m[K    screen[01;31m[K-[m[K=(height+vert_spacing*2)*DWIDTH;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K252[m[K[36m[K:[m[K        draw_char[01;31m[K-[m[K=CHAR_PRINTABLE_MIN;  
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K264[m[K[36m[K:[m[K                    draw=char_data[i]&(1<<(j[01;31m[K-[m[Kvert_spacing));
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K275[m[K[36m[K:[m[K                    if (fg!=[01;31m[K-[m[K1)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K284[m[K[36m[K:[m[K                    if (bg!=[01;31m[K-[m[K1)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K296[m[K[36m[K:[m[K            if (bg!=[01;31m[K-[m[K1)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K303[m[K[36m[K:[m[K            screen+=DWIDTH[01;31m[K-[m[Kwidth;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K311[m[K[36m[K:[m[K        screen[01;31m[K-[m[K=(height+vert_spacing*2)*DWIDTH;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K338[m[K[36m[K:[m[K    pos.y[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K349[m[K[36m[K:[m[K        *text='[01;31m[K-[m[K';
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K399[m[K[36m[K:[m[K    for (int i=(digits[01;31m[K-[m[K1);i>=0;i[01;31m[K-[m[K[01;31m[K-[m[K)
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K403[m[K[36m[K:[m[K        else digit+='A'[01;31m[K-[m[K10;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K421[m[K[36m[K:[m[K            else digit+='A'[01;31m[K-[m[K10;
[35m[Ksrc/text.c[m[K[36m[K:[m[K[32m[K447[m[K[36m[K:[m[K        comma_counter[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K5[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K11[m[K[36m[K:[m[K//Internal primitives [01;31m[K-[m[K not visible to user
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K19[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K    int32_t loop_min=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K21[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K22[m[K[36m[K:[m[K    int32_t loop_max=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K25[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K26[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K28[m[K[36m[K:[m[K    //Push existing J counter to R[01;31m[K-[m[Kstack
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K29[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>rstack<engine[01;31m[K-[m[K>rstack_base)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K31[m[K[36m[K:[m[K        //Out of R[01;31m[K-[m[Kstack memory [01;31m[K-[m[K abort
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K32[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_RSTACK_FULL;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K33[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K37[m[K[36m[K:[m[K        //Push J counter to R[01;31m[K-[m[Kstack
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K38[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value=engine[01;31m[K-[m[K>loop_j;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value_max=engine[01;31m[K-[m[K>loop_j_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K40[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type=FORTH_RSTACK_DO_LOOP;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K41[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>index=engine[01;31m[K-[m[K>word_index;;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K        //Decrease R[01;31m[K-[m[Kstack pointer to next element
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K44[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j=engine[01;31m[K-[m[K>loop_i;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j_max=engine[01;31m[K-[m[K>loop_i_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K51[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i=loop_min;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K52[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i_max=loop_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K    //Pop all R[01;31m[K-[m[Kstack values for word including return address
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K        //Pop R[01;31m[K-[m[Kstack value
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K66[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type==FORTH_RSTACK_RETURN)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K69[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(engine[01;31m[K-[m[K>word_bodies+engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K74[m[K[36m[K:[m[K        else if (engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type==FORTH_RSTACK_DONE)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K76[m[K[36m[K:[m[K            //Returning from top[01;31m[K-[m[Klevel word [01;31m[K-[m[K stop executing
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K77[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K84[m[K[36m[K:[m[K            //Found loop counter or something else [01;31m[K-[m[K keep searching
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K93[m[K[36m[K:[m[K    uint32_t quote_length=*(uint32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K96[m[K[36m[K:[m[K    const char *text=((char *)(engine[01;31m[K-[m[K>address+1))+sizeof(uint32_t);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K100[m[K[36m[K:[m[K    log_text("engine[01;31m[K-[m[K>address: %p\n",engine[01;31m[K-[m[K>address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K    log_text("length address: %p\n",(uint32_t *)(engine[01;31m[K-[m[K>address+1));
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K113[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K127[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K134[m[K[36m[K:[m[K    text+=(ptr_size[01;31m[K-[m[K(quote_length%ptr_size))%ptr_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K135[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=((void (**)(struct ForthEngine *engine))text)[01;31m[K-[m[K1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K140[m[K[36m[K:[m[K    log_text("new engine[01;31m[K-[m[K>address: %p\n",engine[01;31m[K-[m[K>address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K150[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>loop_i;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K151[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K152[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K159[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K160[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K161[m[K[36m[K:[m[K    int32_t test_value=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K166[m[K[36m[K:[m[K        //Jump taken [01;31m[K-[m[K fetch offset which is stored after pointer to current word
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K167[m[K[36m[K:[m[K        int32_t offset=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K168[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *))((char *)engine[01;31m[K-[m[K>address+offset);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K        //Jump not taken [01;31m[K-[m[K increment thread pointer to account for offset stored after primitive
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(((uint32_t *)engine[01;31m[K-[m[K>address)+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>loop_j;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K182[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K183[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K190[m[K[36m[K:[m[K    int32_t offset=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K191[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *))((char *)engine[01;31m[K-[m[K>address+offset);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K197[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i=engine[01;31m[K-[m[K>loop_j;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K198[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i_max=engine[01;31m[K-[m[K>loop_j_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K200[m[K[36m[K:[m[K    //Pop structure from R[01;31m[K-[m[Kstack to restore J counter
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K201[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>rstack++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K202[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_j=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K203[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_j_max=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K206[m[K[36m[K:[m[K    int32_t offset=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K207[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *))((char *)engine[01;31m[K-[m[K>address+offset);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K213[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K216[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>loop_i!=engine[01;31m[K-[m[K>loop_i_max)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K218[m[K[36m[K:[m[K        //Jump taken [01;31m[K-[m[K fetch offset which is stored after pointer to current word
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K219[m[K[36m[K:[m[K        int32_t offset=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K220[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *))((char *)engine[01;31m[K-[m[K>address+offset);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K224[m[K[36m[K:[m[K        //Jump not taken [01;31m[K-[m[K increment thread pointer to account for offset stored after primitive
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K225[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(((uint32_t *)engine[01;31m[K-[m[K>address)+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K228[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i=engine[01;31m[K-[m[K>loop_j;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K229[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i_max=engine[01;31m[K-[m[K>loop_j_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K231[m[K[36m[K:[m[K        //Pop structure from R[01;31m[K-[m[Kstack to restore J counter
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K232[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K233[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K234[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j_max=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K241[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K242[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K245[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>loop_i+=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K248[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>loop_i<engine[01;31m[K-[m[K>loop_i_max)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K250[m[K[36m[K:[m[K        //Jump taken [01;31m[K-[m[K fetch offset which is stored after pointer to current word
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K251[m[K[36m[K:[m[K        int32_t offset=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K252[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *))((char *)engine[01;31m[K-[m[K>address+offset);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K256[m[K[36m[K:[m[K        //Jump not taken [01;31m[K-[m[K increment thread pointer to account for offset stored after primitive
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K257[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(((uint32_t *)engine[01;31m[K-[m[K>address)+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K260[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i=engine[01;31m[K-[m[K>loop_j;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K261[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_i_max=engine[01;31m[K-[m[K>loop_j_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K263[m[K[36m[K:[m[K        //Pop structure from R[01;31m[K-[m[Kstack to restore J counter
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K264[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>rstack++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K265[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K266[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>loop_j_max=engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value_max;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K274[m[K[36m[K:[m[K    int32_t num=*(int32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K277[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(((int32_t *)engine[01;31m[K-[m[K>address)+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K280[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=num;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K281[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K282[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K289[m[K[36m[K:[m[K    uint32_t quote_length=*(uint32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K292[m[K[36m[K:[m[K    const char *text=((char *)(engine[01;31m[K-[m[K>address+1))+sizeof(uint32_t);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K295[m[K[36m[K:[m[K    uint32_t address=engine[01;31m[K-[m[K>data_index;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K299[m[K[36m[K:[m[K    log_text("engine[01;31m[K-[m[K>address: %p\n",engine[01;31m[K-[m[K>address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K300[m[K[36m[K:[m[K    log_text("length address: %p\n",(uint32_t *)(engine[01;31m[K-[m[K>address+1));
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K311[m[K[36m[K:[m[K        *(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=*text;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K314[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(char))&engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K325[m[K[36m[K:[m[K    text+=(ptr_size[01;31m[K-[m[K(quote_length%ptr_size))%ptr_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K326[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=((void (**)(struct ForthEngine *engine))text)[01;31m[K-[m[K1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K331[m[K[36m[K:[m[K    log_text("new engine[01;31m[K-[m[K>address: %p\n",engine[01;31m[K-[m[K>address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K334[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=address;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K336[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K337[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K338[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=quote_length;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K339[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K340[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K346[m[K[36m[K:[m[K//Call secondary which may be user[01;31m[K-[m[Kdefined word or variable
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K350[m[K[36m[K:[m[K    uint32_t index=*(uint32_t *)(engine[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K353[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(((uint32_t *)engine[01;31m[K-[m[K>address)+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K355[m[K[36m[K:[m[K    //Figure out if secondary is user[01;31m[K-[m[Kdefined word or variable [01;31m[K-[m[K slower but necessary to support redefining words
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K356[m[K[36m[K:[m[K    struct ForthWordHeader *secondary=&engine[01;31m[K-[m[K>word_headers[index];
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K357[m[K[36m[K:[m[K    if (secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_UNDEFINED)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K359[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K word referenced in word but never defined
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K360[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_UNDEFINED;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K361[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error_word=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K362[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K364[m[K[36m[K:[m[K    else if ((secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_CONSTANT)||(secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_CREATE)||
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K365[m[K[36m[K:[m[K            (secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_VARIABLE))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K368[m[K[36m[K:[m[K        int32_t num=*(int32_t *)(secondary[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K371[m[K[36m[K:[m[K        *engine[01;31m[K-[m[K>stack=num;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K372[m[K[36m[K:[m[K        uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K373[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K377[m[K[36m[K:[m[K        //Push word return address to R[01;31m[K-[m[Kstack [01;31m[K-[m[K faster to inline than call forth_rstack_push
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K378[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>rstack<engine[01;31m[K-[m[K>rstack_base)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K380[m[K[36m[K:[m[K            //Out of R[01;31m[K-[m[Kstack memory [01;31m[K-[m[K abort
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K381[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_RSTACK_FULL;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K382[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K386[m[K[36m[K:[m[K            //Increase word index so tagged R[01;31m[K-[m[Kstack addresses can be linked to word they belong to
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K387[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>word_index++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K389[m[K[36m[K:[m[K            //Push new values to R[01;31m[K-[m[Kstack
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K390[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value=(uintptr_t)(engine[01;31m[K-[m[K>address)[01;31m[K-[m[K(uintptr_t)(engine[01;31m[K-[m[K>word_bodies);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K391[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type=FORTH_RSTACK_RETURN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K392[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>index=engine[01;31m[K-[m[K>word_index;;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K394[m[K[36m[K:[m[K            //Decrease R[01;31m[K-[m[Kstack pointer to next element
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K395[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K398[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>address=secondary[01;31m[K-[m[K>address;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K401[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>address[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K414[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K415[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K416[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K417[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K420[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K423[m[K[36m[K:[m[K    *(int32_t*)(engine[01;31m[K-[m[K>data+address)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K426[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K427[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K435[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K436[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K438[m[K[36m[K:[m[K    //Read 32[01;31m[K-[m[Kbit value here so no endian problems
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K439[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K440[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K443[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K446[m[K[36m[K:[m[K    *(engine[01;31m[K-[m[K>data+address)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K449[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K450[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K458[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K459[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K461[m[K[36m[K:[m[K    //Read 32[01;31m[K-[m[Kbit value here so no endian problems
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K462[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K463[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K466[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask_16;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K469[m[K[36m[K:[m[K    *(int16_t*)(engine[01;31m[K-[m[K>data+address)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K472[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K473[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K480[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_TICK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K492[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_PAREN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K506[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K507[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K510[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K511[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K512[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K515[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1*arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K523[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K524[m[K[36m[K:[m[K    int32_t divisor=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K525[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K526[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K527[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K528[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K536[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K537[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=quotient;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K540[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K541[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K549[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K550[m[K[36m[K:[m[K    int32_t divisor=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K551[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K552[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K553[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K554[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K563[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K564[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=remainder;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K565[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K566[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=quotient;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K569[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K570[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K578[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K579[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K582[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K583[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K584[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K587[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1+arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K599[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_PLUS_LOOP;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K608[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K609[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K612[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index&=engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K615[m[K[36m[K:[m[K    *(int32_t*)(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K618[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(int32_t))&engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K626[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K627[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K630[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K633[m[K[36m[K:[m[K    *(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K636[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(int8_t))&engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K644[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K645[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K648[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index&=engine[01;31m[K-[m[K>data_mask_16;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K651[m[K[36m[K:[m[K    *(int16_t*)(engine[01;31m[K-[m[K>data+engine[01;31m[K-[m[K>data_index)=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K654[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+sizeof(int16_t))&engine[01;31m[K-[m[K>data_mask_16;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K662[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K663[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K666[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K667[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K668[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K671[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1[01;31m[K-[m[Karg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K678[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_COMMENT;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K691[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K692[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K693[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K697[m[K[36m[K:[m[K        text_int32(*engine[01;31m[K-[m[K>stack,text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K698[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K701[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K704[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K712[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K713[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K714[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K718[m[K[36m[K:[m[K        text_uint32(*engine[01;31m[K-[m[K>stack,text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K719[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K722[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K725[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K733[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K734[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K735[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K739[m[K[36m[K:[m[K        text_hex32(*engine[01;31m[K-[m[K>stack,text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K740[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K743[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K746[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K754[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_DOT_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K761[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_DOT_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K770[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K771[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K774[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K775[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K776[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K780[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1/arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K788[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K789[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K790[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K791[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K797[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K798[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2/arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K799[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K800[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2%arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K807[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_COLON;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K823[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_SEMICOLON;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K832[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K833[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K836[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K837[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K838[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K840[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K841[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1<arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K849[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K850[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K853[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K854[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K855[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K857[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K858[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1==arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K866[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K867[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K870[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K871[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K872[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K874[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K875[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1>arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K878[m[K[36m[K:[m[K//TO_NUMBER [01;31m[K-[m[K Note differs from >NUMBER in standard!
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K879[m[K[36m[K:[m[K//(c[01;31m[K-[m[Kaddr1 u1 [01;31m[K-[m[K s2 c[01;31m[K-[m[Kaddr2 u2) [01;31m[K-[m[K no doubles or scratch space
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K884[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K885[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K886[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K887[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K890[m[K[36m[K:[m[K    if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K900[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K903[m[K[36m[K:[m[K        char character=*(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K904[m[K[36m[K:[m[K        if ((character=='[01;31m[K-[m[K')&&(i==0))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K906[m[K[36m[K:[m[K            //First character is [01;31m[K-[m[K so number is negative
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K908[m[K[36m[K:[m[K            unconverted_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K912[m[K[36m[K:[m[K            //Character is valid digit [01;31m[K-[m[K add to result
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K914[m[K[36m[K:[m[K            if (negative==false) result+=character[01;31m[K-[m[K'0';
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K915[m[K[36m[K:[m[K            else if (negative==true) result[01;31m[K-[m[K=character[01;31m[K-[m[K'0';
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K918[m[K[36m[K:[m[K                //Error [01;31m[K-[m[K number is out of range
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K919[m[K[36m[K:[m[K                for (int j=0;j<TEXT_INT32_SIZE[01;31m[K-[m[K1;j++)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K922[m[K[36m[K:[m[K                    starting_address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K925[m[K[36m[K:[m[K                    char character=*(engine[01;31m[K-[m[K>data+starting_address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K927[m[K[36m[K:[m[K                    if (((character=='[01;31m[K-[m[K')&&(j==0))||((character>='0')&&(character<='9')))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K930[m[K[36m[K:[m[K                        engine[01;31m[K-[m[K>error_num[j]=character;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K931[m[K[36m[K:[m[K                        engine[01;31m[K-[m[K>error_num[j+1]=0;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K937[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_INT32_RANGE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K938[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K941[m[K[36m[K:[m[K                lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K942[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K946[m[K[36m[K:[m[K            unconverted_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K950[m[K[36m[K:[m[K            //Non number character [01;31m[K-[m[K stop looping
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K957[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K958[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=address;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K959[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K960[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=result;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K961[m[K[36m[K:[m[K    *(uint32_t*)(engine[01;31m[K-[m[K>stack)=unconverted_count;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K964[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K965[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K969[m[K[36m[K:[m[K//(c[01;31m[K-[m[Kaddr1 u1 [01;31m[K-[m[K s2 c[01;31m[K-[m[Kaddr2 u2)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K974[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K975[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K976[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K977[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K980[m[K[36m[K:[m[K    if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K986[m[K[36m[K:[m[K    //Check for preceding [01;31m[K-[m[K
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K990[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K991[m[K[36m[K:[m[K        if  (*(engine[01;31m[K-[m[K>data+address)=='[01;31m[K-[m[K')
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K995[m[K[36m[K:[m[K            count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K996[m[K[36m[K:[m[K            unconverted_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1006[m[K[36m[K:[m[K        new_address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1007[m[K[36m[K:[m[K        if  (*(engine[01;31m[K-[m[K>data+new_address)=='0')
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1010[m[K[36m[K:[m[K            new_address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1011[m[K[36m[K:[m[K            if  (*(engine[01;31m[K-[m[K>data+new_address)=='x')
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1015[m[K[36m[K:[m[K                count[01;31m[K-[m[K=2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1016[m[K[36m[K:[m[K                unconverted_count[01;31m[K-[m[K=2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1026[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1029[m[K[36m[K:[m[K        char character=*(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1032[m[K[36m[K:[m[K            digit=character[01;31m[K-[m[K'0';
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1034[m[K[36m[K:[m[K            digit=character[01;31m[K-[m[K'a'+10;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1036[m[K[36m[K:[m[K            digit=character[01;31m[K-[m[K'A'+10;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1039[m[K[36m[K:[m[K            //Non number character [01;31m[K-[m[K stop looping
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1043[m[K[36m[K:[m[K        //Character is valid digit [01;31m[K-[m[K add to result
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1046[m[K[36m[K:[m[K        else if (negative==true) result[01;31m[K-[m[K=digit;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1049[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K number is out of range
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1050[m[K[36m[K:[m[K            for (int j=0;j<TEXT_HEX32_SIZE[01;31m[K-[m[K1;j++)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1053[m[K[36m[K:[m[K                starting_address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1056[m[K[36m[K:[m[K                char character=*(engine[01;31m[K-[m[K>data+starting_address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1058[m[K[36m[K:[m[K                if (((character=='[01;31m[K-[m[K')&&(j==0))||
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1064[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>error_num[j]=character;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1065[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>error_num[j+1]=0;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1071[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_HEX32_RANGE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1072[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1075[m[K[36m[K:[m[K            lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1076[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1080[m[K[36m[K:[m[K        unconverted_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1085[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1086[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=address;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1087[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1088[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=result;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1089[m[K[36m[K:[m[K    *(uint32_t*)(engine[01;31m[K-[m[K>stack)=unconverted_count;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1092[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1093[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1097[m[K[36m[K:[m[K//(n c[01;31m[K-[m[Kaddr [01;31m[K-[m[K u)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1102[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1103[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1104[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1105[m[K[36m[K:[m[K    int32_t num=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1116[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1119[m[K[36m[K:[m[K        *(engine[01;31m[K-[m[K>data+address)=num_buffer[i];
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1126[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1127[m[K[36m[K:[m[K    *(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=num_len;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1130[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1131[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1135[m[K[36m[K:[m[K//(u c[01;31m[K-[m[Kaddr [01;31m[K-[m[K u) 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1140[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1141[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1142[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1143[m[K[36m[K:[m[K    uint32_t num=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1154[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask; 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1157[m[K[36m[K:[m[K        *(engine[01;31m[K-[m[K>data+address)=num_buffer[i];
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1164[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1165[m[K[36m[K:[m[K    *(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=num_len;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1168[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1169[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1177[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1178[m[K[36m[K:[m[K    if (*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)!=0)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1180[m[K[36m[K:[m[K        //Value is not zero [01;31m[K-[m[K duplicate
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1181[m[K[36m[K:[m[K        *engine[01;31m[K-[m[K>stack=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1184[m[K[36m[K:[m[K        lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1185[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1194[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1195[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1198[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1201[m[K[36m[K:[m[K    int32_t value=*(int32_t*)(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1204[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1212[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1213[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1216[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1219[m[K[36m[K:[m[K    uint8_t value=*(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1222[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1230[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1231[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1234[m[K[36m[K:[m[K    address&=engine[01;31m[K-[m[K>data_mask_16;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1237[m[K[36m[K:[m[K    uint16_t value=*(uint16_t*)(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1240[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1246[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1256[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1257[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1258[m[K[36m[K:[m[K    if (value<0) *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[Kvalue;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1266[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1267[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1270[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>input!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1273[m[K[36m[K:[m[K        lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1274[m[K[36m[K:[m[K        uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1275[m[K[36m[K:[m[K        uint32_t count=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1278[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1279[m[K[36m[K:[m[K        uint32_t bytes_written=engine[01;31m[K-[m[K>input(address,(char *)engine[01;31m[K-[m[K>data,count,engine[01;31m[K-[m[K>data_mask);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1282[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=bytes_written;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1289[m[K[36m[K:[m[K    int32_t remainder=engine[01;31m[K-[m[K>data_index%FORTH_CELL_SIZE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1292[m[K[36m[K:[m[K        //Address is not aligned [01;31m[K-[m[K round up
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1293[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+FORTH_CELL_SIZE[01;31m[K-[m[Kremainder)&engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1301[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1302[m[K[36m[K:[m[K    uint32_t address=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1306[m[K[36m[K:[m[K        //Address is not aligned [01;31m[K-[m[K round up
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1307[m[K[36m[K:[m[K        address+=FORTH_CELL_SIZE[01;31m[K-[m[Kremainder;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1311[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=(address&engine[01;31m[K-[m[K>data_mask_32);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1319[m[K[36m[K:[m[K    log_text("data_index: %d\n",engine[01;31m[K-[m[K>data_index);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1323[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1324[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1327[m[K[36m[K:[m[K    int32_t allot_count=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1328[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+allot_count)&(engine[01;31m[K-[m[K>data_mask);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1331[m[K[36m[K:[m[K    log_text("new data_index: %d\n",engine[01;31m[K-[m[K>data_index);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1340[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1341[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1344[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1345[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1346[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1349[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1&arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1361[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_BEGIN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1369[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1372[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1373[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1381[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1382[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1383[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1384[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1387[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1388[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1389[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1390[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=(arg1+arg2)&engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1396[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1397[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1398[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value*FORTH_CELL_SIZE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1405[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_CHAR;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1417[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_CONSTANT;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1428[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1430[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print("\n");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1431[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1439[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_CREATE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1451[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=forth_stack_count(engine);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1454[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1455[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1466[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_DO;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1473[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1474[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1480[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1481[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1489[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1490[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1493[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1494[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1502[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1503[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1506[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1507[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1510[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1511[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1514[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1515[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1526[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_ELSE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1534[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1535[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1536[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1540[m[K[36m[K:[m[K        text_buffer[0]=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1542[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1545[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1553[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_EXECUTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1559[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1560[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1562[m[K[36m[K:[m[K    uint32_t word_ID=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1573[m[K[36m[K:[m[K                //Error [01;31m[K-[m[K can't execute EXECUTE from EXECUTE
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1574[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_EXECUTE_IN_EXECUTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1575[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1579[m[K[36m[K:[m[K                //Primitive has body [01;31m[K-[m[K ok to execute
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1585[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K no body present for primitive so only has interpret and compile behavior
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1586[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_EXECUTE_NO_BODY;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1587[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error_word=forth_primitives[word_ID].name;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1588[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1591[m[K[36m[K:[m[K    else if (word_ID<forth_primitives_len+engine[01;31m[K-[m[K>word_count)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1594[m[K[36m[K:[m[K        uint32_t secondary_id=word_ID[01;31m[K-[m[Kforth_primitives_len;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1596[m[K[36m[K:[m[K        //Same as prim_hidden_secondary [01;31m[K-[m[K inlined for speed
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1598[m[K[36m[K:[m[K        //Figure out if secondary is user[01;31m[K-[m[Kdefined word or variable [01;31m[K-[m[K slower but necessary to support redefining words
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1599[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=&engine[01;31m[K-[m[K>word_headers[secondary_id];
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1600[m[K[36m[K:[m[K        if (secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_UNDEFINED)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1602[m[K[36m[K:[m[K            //Error [01;31m[K-[m[K word referenced in word but never defined
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1603[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_UNDEFINED;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1604[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>error_word=secondary[01;31m[K-[m[K>name;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1605[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1607[m[K[36m[K:[m[K        else if ((secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_CONSTANT)||(secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_CREATE)||
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1608[m[K[36m[K:[m[K                (secondary[01;31m[K-[m[K>type==FORTH_SECONDARY_VARIABLE))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1611[m[K[36m[K:[m[K            int32_t num=*(int32_t *)(secondary[01;31m[K-[m[K>address+1);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1614[m[K[36m[K:[m[K            *engine[01;31m[K-[m[K>stack=num;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1615[m[K[36m[K:[m[K            uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1616[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1620[m[K[36m[K:[m[K            //Push word return address to R[01;31m[K-[m[Kstack [01;31m[K-[m[K faster to inline than call forth_rstack_push
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1621[m[K[36m[K:[m[K            if (engine[01;31m[K-[m[K>rstack<engine[01;31m[K-[m[K>rstack_base)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1623[m[K[36m[K:[m[K                //Out of R[01;31m[K-[m[Kstack memory [01;31m[K-[m[K abort
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1624[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_RSTACK_FULL;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1625[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1629[m[K[36m[K:[m[K                //Increase word index so tagged R[01;31m[K-[m[Kstack addresses can be linked to word they belong to
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1630[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>word_index++;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1632[m[K[36m[K:[m[K                //Push new values to R[01;31m[K-[m[Kstack
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1633[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>value=(uintptr_t)(engine[01;31m[K-[m[K>address)[01;31m[K-[m[K(uintptr_t)(engine[01;31m[K-[m[K>word_bodies);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1634[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>type=FORTH_RSTACK_RETURN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1635[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K>index=engine[01;31m[K-[m[K>word_index;;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1637[m[K[36m[K:[m[K                //Decrease R[01;31m[K-[m[Kstack pointer to next element
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1638[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>rstack[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1641[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>address=secondary[01;31m[K-[m[K>address;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1644[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>address[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1650[m[K[36m[K:[m[K        //Error [01;31m[K-[m[K ID on stack is out of range
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1651[m[K[36m[K:[m[K        text_uint32(word_ID,engine[01;31m[K-[m[K>error_num);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1652[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>error=FORTH_ENGINE_ERROR_EXECUTE_ID;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1653[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1668[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1669[m[K[36m[K:[m[K    int32_t character=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1670[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1671[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1672[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1673[m[K[36m[K:[m[K    uint32_t address=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1677[m[K[36m[K:[m[K        if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1681[m[K[36m[K:[m[K            address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1682[m[K[36m[K:[m[K            *(engine[01;31m[K-[m[K>data+address)=character;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1688[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1689[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1701[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>data_index;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1704[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1705[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1716[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_I;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1729[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_IF;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1736[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1737[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1738[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value^[01;31m[K-[m[K1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1749[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_J;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1756[m[K[36m[K:[m[K    //Fetch flag [01;31m[K-[m[K true for blocking key input, false for non[01;31m[K-[m[Kblocking
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1758[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1759[m[K[36m[K:[m[K    int32_t flag=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1760[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>getkey==NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1762[m[K[36m[K:[m[K        //No getkey routine exists [01;31m[K-[m[K return 0
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1763[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=0;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1769[m[K[36m[K:[m[K        int32_t key=engine[01;31m[K-[m[K>getkey(blocking);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1770[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=key;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1773[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_modifiers!=NULL) engine[01;31m[K-[m[K>update_modifiers();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1786[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_LEAVE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1799[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_LITERAL;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1812[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_LOOP;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1821[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1822[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1825[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1826[m[K[36m[K:[m[K    uint32_t arg1=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1827[m[K[36m[K:[m[K    uint32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1830[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1<<arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1838[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1839[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1842[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1843[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1844[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1849[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1853[m[K[36m[K:[m[K        //Larger value is already in place [01;31m[K-[m[K nothing to do
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1862[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1863[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1866[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1867[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1868[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1874[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1878[m[K[36m[K:[m[K        //Smaller value is already in place [01;31m[K-[m[K nothing to do
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1887[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1888[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1891[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1892[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1893[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1899[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1%arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1907[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1908[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1909[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1910[m[K[36m[K:[m[K    uint32_t dest=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1911[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1912[m[K[36m[K:[m[K    uint32_t source=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1915[m[K[36m[K:[m[K    if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1920[m[K[36m[K:[m[K        dest&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1921[m[K[36m[K:[m[K        source&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1925[m[K[36m[K:[m[K        if (dest+count>engine[01;31m[K-[m[K>data_size) dest_count=engine[01;31m[K-[m[K>data_size[01;31m[K-[m[Kdest;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1927[m[K[36m[K:[m[K        if (source+count>engine[01;31m[K-[m[K>data_size) source_count=engine[01;31m[K-[m[K>data_size[01;31m[K-[m[Ksource;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1930[m[K[36m[K:[m[K        //Copy non[01;31m[K-[m[Kwrapping section
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1934[m[K[36m[K:[m[K        memmove(engine[01;31m[K-[m[K>data+dest,engine[01;31m[K-[m[K>data+source,bytes_copied);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1937[m[K[36m[K:[m[K        count[01;31m[K-[m[K=bytes_copied;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1944[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1945[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1951[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1952[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1953[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[Kvalue;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1961[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1962[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1965[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1966[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1967[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1970[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1|arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1978[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1979[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1982[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1983[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1991[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1992[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1993[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+4))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1994[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1997[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K1998[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2001[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2002[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2003[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2004[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2010[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>clear_console!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2013[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>clear_console();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2016[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2029[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_REPEAT;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2038[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2039[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2040[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2041[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2042[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2043[m[K[36m[K:[m[K    int32_t arg3=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2046[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2047[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg3;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2048[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2049[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2050[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2051[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2059[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2060[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2061[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2062[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2063[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2064[m[K[36m[K:[m[K    int32_t arg3=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2067[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2068[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2069[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2070[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg3;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2071[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2072[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2080[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2081[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2084[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2085[m[K[36m[K:[m[K    uint32_t arg1=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2086[m[K[36m[K:[m[K    uint32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2089[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1>>arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2096[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_S_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2103[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_S_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2110[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2112[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2113[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2122[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2123[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2126[m[K[36m[K:[m[K    int32_t space_count=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2127[m[K[36m[K:[m[K    if ((space_count>0)&&(engine[01;31m[K-[m[K>print!=NULL))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2129[m[K[36m[K:[m[K        if (space_count>engine[01;31m[K-[m[K>max_spaces) 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2132[m[K[36m[K:[m[K            space_count=engine[01;31m[K-[m[K>max_spaces;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2136[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2140[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2149[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2150[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2151[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2152[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2155[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2156[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2157[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2158[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2166[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2167[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2168[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2169[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2170[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2171[m[K[36m[K:[m[K    int32_t arg3=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2172[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+4))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2173[m[K[36m[K:[m[K    int32_t arg4=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2176[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2177[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg3;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2178[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2179[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg4;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2180[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2181[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2182[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+4))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2183[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2195[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_THEN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2203[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2204[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2205[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2206[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2209[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2212[m[K[36m[K:[m[K        if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2218[m[K[36m[K:[m[K            address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2221[m[K[36m[K:[m[K            text_buffer[0]=*(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2222[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2228[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2232[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2233[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2241[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2242[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2245[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2246[m[K[36m[K:[m[K    uint32_t arg1=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2247[m[K[36m[K:[m[K    uint32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2249[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2250[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1<arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2258[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2259[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2262[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2263[m[K[36m[K:[m[K    uint32_t arg1=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2264[m[K[36m[K:[m[K    uint32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2266[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2267[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1>arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2279[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_UNTIL;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2287[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_VARIABLE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2304[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_WHILE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2313[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2314[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2317[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2318[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2319[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2322[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1^arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2333[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>state=FORTH_STATE_INTERPRET;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2334[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>in_bracket=true;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2341[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>in_bracket==false) 
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2348[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>state=FORTH_STATE_COMPILE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2361[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_BRACKET_TICK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2377[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_BRACKET_CHAR;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2386[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2387[m[K[36m[K:[m[K    uint32_t spaces=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2388[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2389[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2391[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2399[m[K[36m[K:[m[K        else spaces[01;31m[K-[m[K=strlen(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2402[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2405[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2408[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2412[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2413[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2421[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2422[m[K[36m[K:[m[K    uint32_t spaces=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2423[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2424[m[K[36m[K:[m[K    uint32_t value=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2426[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2434[m[K[36m[K:[m[K        else spaces[01;31m[K-[m[K=strlen(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2437[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2440[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2443[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2447[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2448[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2456[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2457[m[K[36m[K:[m[K    uint32_t spaces=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2458[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2459[m[K[36m[K:[m[K    uint32_t value=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2461[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2469[m[K[36m[K:[m[K        else spaces[01;31m[K-[m[K=strlen(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2472[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2475[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2478[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2482[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2483[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2491[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2492[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2495[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2496[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2497[m[K[36m[K:[m[K    int32_t arg2=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2499[m[K[36m[K:[m[K    //Write result (note true is 1 in C but [01;31m[K-[m[K1 in FORTH)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2500[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=[01;31m[K-[m[K(arg1!=arg2);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2512[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_AGAIN;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2525[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=FORTH_FALSE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2528[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2529[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2537[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2538[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2541[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2542[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=*engine[01;31m[K-[m[K>stack;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2549[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_S_BACKSLASH_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2556[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_S_BACKSLASH_QUOTE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2564[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=FORTH_TRUE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2567[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2568[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2576[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2577[m[K[36m[K:[m[K    int32_t arg1=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2578[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2579[m[K[36m[K:[m[K    int32_t arg2=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2582[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2583[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg2;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2584[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2585[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2586[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=arg1;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2589[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2590[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2597[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>data_size[01;31m[K-[m[Kengine[01;31m[K-[m[K>data_index;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2601[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2602[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2610[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2611[m[K[36m[K:[m[K    int32_t max=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2612[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2613[m[K[36m[K:[m[K    int32_t min=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2614[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2615[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2618[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+3))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2619[m[K[36m[K:[m[K    if ((value>=min)&&(value<=max)) *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=FORTH_TRUE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2620[m[K[36m[K:[m[K    else *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=FORTH_FALSE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2623[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2624[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2630[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2634[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print("<");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2636[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2637[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print("> ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2638[m[K[36m[K:[m[K        int32_t *stack=engine[01;31m[K-[m[K>stack+stack_count;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2642[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2643[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2644[m[K[36m[K:[m[K            stack[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2648[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2657[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2658[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2659[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2662[m[K[36m[K:[m[K        uint32_t address=(*(engine[01;31m[K-[m[K>stack))&engine[01;31m[K-[m[K>data_mask_32;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2665[m[K[36m[K:[m[K        int32_t value=*(int32_t*)(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2670[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2673[m[K[36m[K:[m[K        engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2676[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2684[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>print!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2687[m[K[36m[K:[m[K        lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2688[m[K[36m[K:[m[K        uint32_t count=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2689[m[K[36m[K:[m[K        lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2690[m[K[36m[K:[m[K        uint32_t address=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2700[m[K[36m[K:[m[K            address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2704[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print("\n");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2707[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print(address_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2708[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print(": ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2712[m[K[36m[K:[m[K            uint8_t byte=*(engine[01;31m[K-[m[K>data+address);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2715[m[K[36m[K:[m[K            engine[01;31m[K-[m[K>print(text_buffer);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2720[m[K[36m[K:[m[K            if ((byte_index==FORTH_DUMP_BYTES)||(i==count[01;31m[K-[m[K1))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2734[m[K[36m[K:[m[K                for (uint32_t j=0;j<FORTH_DUMP_BYTES[01;31m[K-[m[Kbyte_index;j++)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2736[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>print("   ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2740[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print("  ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2741[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print(byte_display);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2745[m[K[36m[K:[m[K                if ((line_count==FORTH_DUMP_MAX_LINES)&&(i!=count[01;31m[K-[m[K1))
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2747[m[K[36m[K:[m[K                    engine[01;31m[K-[m[K>print("\nOutput truncated");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2757[m[K[36m[K:[m[K                //Byte limit for line not reached [01;31m[K-[m[K print space between bytes
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2758[m[K[36m[K:[m[K                engine[01;31m[K-[m[K>print(" ");
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2766[m[K[36m[K:[m[K        if (engine[01;31m[K-[m[K>update_screen!=NULL) engine[01;31m[K-[m[K>update_screen();
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2770[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2771[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2783[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_WORDS;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2795[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_WORDSIZE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2806[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>exit_program=true;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2807[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>executing=false;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2814[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)(engine[01;31m[K-[m[K>stack_base+(engine[01;31m[K-[m[K>stack_count[01;31m[K-[m[K1)*FORTH_CELL_SIZE);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2821[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>data_index=(engine[01;31m[K-[m[K>data_index+(engine[01;31m[K-[m[K>data_index&1))&engine[01;31m[K-[m[K>data_mask_16;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2828[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2829[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2835[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=(address&engine[01;31m[K-[m[K>data_mask_16);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2842[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2843[m[K[36m[K:[m[K    int32_t key=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2845[m[K[36m[K:[m[K    if (engine[01;31m[K-[m[K>printable!=NULL)
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2848[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=engine[01;31m[K-[m[K>printable(key);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2852[m[K[36m[K:[m[K        //No printable function [01;31m[K-[m[K return 0
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2853[m[K[36m[K:[m[K        *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=0;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2863[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2864[m[K[36m[K:[m[K    uint32_t count=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2865[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2866[m[K[36m[K:[m[K    uint32_t address=*(uint32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2869[m[K[36m[K:[m[K    if (count>=engine[01;31m[K-[m[K>data_size) count=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2873[m[K[36m[K:[m[K        address&=engine[01;31m[K-[m[K>data_mask;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2874[m[K[36m[K:[m[K        *(engine[01;31m[K-[m[K>data+address)=0;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2879[m[K[36m[K:[m[K    lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+2))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2880[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2886[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2887[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2890[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2896[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack+1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2897[m[K[36m[K:[m[K    int32_t value=*(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2900[m[K[36m[K:[m[K    *(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower)=value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2907[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_PRIMITIVES;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2919[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_SECONDARIES;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2931[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_UNDEFINED;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2943[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>perf_value;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2946[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2947[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2954[m[K[36m[K:[m[K    *engine[01;31m[K-[m[K>stack=engine[01;31m[K-[m[K>data_size;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2957[m[K[36m[K:[m[K    uintptr_t lower=((uintptr_t)(engine[01;31m[K-[m[K>stack[01;31m[K-[m[K1))&FORTH_STACK_MASK;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2958[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>stack=(int32_t*)((engine[01;31m[K-[m[K>stack_base)|lower);
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2965[m[K[36m[K:[m[K    engine[01;31m[K-[m[K>word_action=FORTH_ACTION_RESIZE;
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K2991[m[K[36m[K:[m[K    {"[01;31m[K-[m[K",1,NULL,NULL,&prim_body_minus},
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K3065[m[K[36m[K:[m[K    {"[01;31m[K-[m[KROT",4,NULL,NULL,&prim_body_minus_rote},
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K3153[m[K[36m[K:[m[K    //disasm [01;31m[K-[m[K just see? edit?
[35m[Ksrc/forth-primitives.c[m[K[36m[K:[m[K[32m[K3155[m[K[36m[K:[m[K        //objdump [01;31m[K-[m[Kt shows function lengths
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K2[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprimitives.h"
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K9[m[K[36m[K:[m[K//TODO [01;31m[K-[m[K PRIORITY
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K16[m[K[36m[K:[m[K[01;31m[K-[m[K paren comments not working in word definition
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K17[m[K[36m[K:[m[K  [01;31m[K-[m[K now can't reproduce
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K18[m[K[36m[K:[m[K  [01;31m[K-[m[K got it more than once to include ) as undefined word
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K20[m[K[36m[K:[m[K[01;31m[K-[m[K GOT SEG FAULT PRESSING HOME!!!
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K21[m[K[36m[K:[m[K  [01;31m[K-[m[K could not reproduce
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K22[m[K[36m[K:[m[K[01;31m[K-[m[K tail call improvements
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K23[m[K[36m[K:[m[K  [01;31m[K-[m[K get compiler to generate tail call
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K24[m[K[36m[K:[m[K  [01;31m[K-[m[K have stack underflow generate exception
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K25[m[K[36m[K:[m[K[01;31m[K-[m[K local variables
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K26[m[K[36m[K:[m[K  [01;31m[K-[m[K then can benchmark
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K27[m[K[36m[K:[m[K  [01;31m[K-[m[K store names after word for browser
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K28[m[K[36m[K:[m[K[01;31m[K-[m[K shift should stay on if held down
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K29[m[K[36m[K:[m[K[01;31m[K-[m[K ON should break ACCEPT and KEY
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K30[m[K[36m[K:[m[K[01;31m[K-[m[K CASE
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K38[m[K[36m[K:[m[K[01;31m[K-[m[K seems char * is an exception
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K  [01;31m[K-[m[K char * is not the same as uint8_t *
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K40[m[K[36m[K:[m[K  [01;31m[K-[m[K seems unsigned char though also has special status???
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K41[m[K[36m[K:[m[K[01;31m[K-[m[K might be good to post some examples and ask for help
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K42[m[K[36m[K:[m[K  [01;31m[K-[m[K yes, file in repo with explanation and links to what may be UB
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K44[m[K[36m[K:[m[K[01;31m[K-[m[K fsanitize=undefined
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K45[m[K[36m[K:[m[K  [01;31m[K-[m[K make sanitize
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K46[m[K[36m[K:[m[K[01;31m[K-[m[K valgrind
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K51[m[K[36m[K:[m[K[01;31m[K-[m[K wait for ticks to go by?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K56[m[K[36m[K:[m[K[01;31m[K-[m[K yes, change mem.c to return values not addresses
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K57[m[K[36m[K:[m[K[01;31m[K-[m[K or provide error function in forth[01;31m[K-[m[Kcompatibility.c
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[Kassembler with built[01;31m[K-[m[Kin safety checks?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K[01;31m[K-[m[K posted on this but now C[01;31m[K-[m[Klike language seems better
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K[01;31m[K-[m[K translates directly to assembly
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K[01;31m[K-[m[K variables referring to XRAM
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K[01;31m[K-[m[K s8, i16 etc variables
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K65[m[K[36m[K:[m[K  [01;31m[K-[m[K better s1, s2, s4?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K66[m[K[36m[K:[m[K[01;31m[K-[m[K register keyword with up to 8 or so variables per function
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K67[m[K[36m[K:[m[K[01;31m[K-[m[K arbitrary calculations with variables and constants
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K68[m[K[36m[K:[m[K[01;31m[K-[m[K ideas to reduce masking
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K69[m[K[36m[K:[m[K  [01;31m[K-[m[K for loop that takes array name so check bounds at beginning
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K70[m[K[36m[K:[m[K    [01;31m[K-[m[K variable name is read/write for array
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K71[m[K[36m[K:[m[K    [01;31m[K-[m[K should also have step as argument
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K72[m[K[36m[K:[m[K      [01;31m[K-[m[K step 4 would mean x+2 generated with no mask
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K73[m[K[36m[K:[m[K    [01;31m[K-[m[K variable itself can't be modified
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K74[m[K[36m[K:[m[K  [01;31m[K-[m[K first element is length so always able to check bounds
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K75[m[K[36m[K:[m[K    [01;31m[K-[m[K also type? actually, should be declared in argument
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K76[m[K[36m[K:[m[K  [01;31m[K-[m[K small amount of checking to see if need mask
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K77[m[K[36m[K:[m[K  [01;31m[K-[m[K seems masking only when pointer modified is most efficient
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K78[m[K[36m[K:[m[K  [01;31m[K-[m[K no casting
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K79[m[K[36m[K:[m[K[01;31m[K-[m[K see assembly for line typed if more than 1 second
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K80[m[K[36m[K:[m[K  [01;31m[K-[m[K limits to optmizing a line at a time but that's fine
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K81[m[K[36m[K:[m[K  [01;31m[K-[m[K either show on screen while typing, press key to see, or link split to show
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K82[m[K[36m[K:[m[K[01;31m[K-[m[K dynamic strings
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K83[m[K[36m[K:[m[K  [01;31m[K-[m[K how to pass around? ref checking?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K84[m[K[36m[K:[m[K[01;31m[K-[m[K no cpp, pointer shenanigans, UB
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K85[m[K[36m[K:[m[Kreview code on github [01;31m[K-[m[K better to see in second light
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K87[m[K[36m[K:[m[K[01;31m[K-[m[K shrink my font? might fit 2[01;31m[K-[m[K3 more lines on screen
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K89[m[K[36m[K:[m[K[01;31m[K-[m[K there was a reason for doing it this way but can't remember now
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K90[m[K[36m[K:[m[K[01;31m[K-[m[K I remember [01;31m[K-[m[K FORTH should be modular and not tied to rest of program
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K97[m[K[36m[K:[m[Ksee assembly for primitives [01;31m[K-[m[K any space saving slow downs?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K100[m[K[36m[K:[m[Kchange [01;31m[K-[m[K>executing to pointer system
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K[01;31m[K-[m[K solves problem of still executing after [01;31m[K-[m[K>executing false if only check every 5th time 
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K102[m[K[36m[K:[m[K[01;31m[K-[m[K no longer need to mask!
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K103[m[K[36m[K:[m[K  [01;31m[K-[m[K implement PERF and DO first
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K104[m[K[36m[K:[m[K[01;31m[K-[m[K actually, not sure in that case how to do check
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K109[m[K[36m[K:[m[K[01;31m[K-[m[K letter after char
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K[01;31m[K-[m[K comments
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K111[m[K[36m[K:[m[K[01;31m[K-[m[K color primitives red if compile only etc
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K112[m[K[36m[K:[m[K[01;31m[K-[m[K tick on number
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K113[m[K[36m[K:[m[K[01;31m[K-[m[K tick on ;, :, quotes etc
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K114[m[K[36m[K:[m[K[01;31m[K-[m[K tick and ['] too
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K115[m[K[36m[K:[m[K[01;31m[K-[m[K quoting words not working yet
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K[01;31m[K-[m[K words with header but no definition should be yellow
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K117[m[K[36m[K:[m[K[01;31m[K-[m[K red after const and var like ;
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K118[m[K[36m[K:[m[K[01;31m[K-[m[K color secondaries if match like primitives
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K119[m[K[36m[K:[m[K[01;31m[K-[m[K escape sequences
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K120[m[K[36m[K:[m[K[01;31m[K-[m[K numbers out of range
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K121[m[K[36m[K:[m[K[01;31m[K-[m[K wordsize
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K122[m[K[36m[K:[m[K[01;31m[K-[m[K var, const, etc
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K123[m[K[36m[K:[m[K[01;31m[K-[m[K at least try blue for primaries
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K124[m[K[36m[K:[m[K[01;31m[K-[m[K compile only red if outside of word
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K125[m[K[36m[K:[m[K  [01;31m[K-[m[K may need to replace compile only error with one generic function
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K126[m[K[36m[K:[m[Kconsole [01;31m[K-[m[K only copy to history if different from last
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K127[m[K[36m[K:[m[Kdouble check all engine[01;31m[K-[m[K>print references check not NULL
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K[01;31m[K-[m[K actually, can mostly disregard if masking
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K132[m[K[36m[K:[m[Koptimize ERASE etc [01;31m[K-[m[K don't need to mask every cycle
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K133[m[K[36m[K:[m[K[01;31m[K-[m[K also, no reason to wrap at end of memory
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K136[m[K[36m[K:[m[K[01;31m[K-[m[K how much space would this take?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K137[m[K[36m[K:[m[K[01;31m[K-[m[K even 16 might be good [01;31m[K-[m[K dont need 256
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K142[m[K[36m[K:[m[K[01;31m[K-[m[K looked briefly and only found C_COMMA. anywhere else?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K148[m[K[36m[K:[m[K[01;31m[K-[m[K calculated goto
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K154[m[K[36m[K:[m[K[01;31m[K-[m[K tail call recursion!
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K155[m[K[36m[K:[m[K[01;31m[K-[m[K could render asm with fixed address for ie MOVE but no benefit on RISC
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K158[m[K[36m[K:[m[K[01;31m[K-[m[K only check so many instructions
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K159[m[K[36m[K:[m[K[01;31m[K-[m[K alignment no longer matters [01;31m[K-[m[K should work!
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K160[m[K[36m[K:[m[K[01;31m[K-[m[K otoh, what if OOB then back in? wouldnt catch
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K161[m[K[36m[K:[m[K  [01;31m[K-[m[K could OR and AND one address in primitive but need stack to be aligned [01;31m[K-[m[K wastes 2x stack
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K162[m[K[36m[K:[m[K[01;31m[K-[m[K could work but not if NEXT is in each primitive
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K164[m[K[36m[K:[m[K[01;31m[K-[m[K probably slower than masking but could try
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K165[m[K[36m[K:[m[K[01;31m[K-[m[K could also be index for each stack depth but slower than explicit check?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K167[m[K[36m[K:[m[K[01;31m[K-[m[K put in word and compare
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K169[m[K[36m[K:[m[K[01;31m[K-[m[K might be ok since already have C version for x86
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K[01;31m[K-[m[K how to do combined primitives? either or
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K[01;31m[K-[m[K fibonacci
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K[01;31m[K-[m[K N queens
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K174[m[K[36m[K:[m[K[01;31m[K-[m[K compare to Basic and Python
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K175[m[K[36m[K:[m[K[01;31m[K-[m[K https://github.com/ulixxe/forth_coremark
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K[01;31m[K-[m[K https://www.eembc.org/coremark/
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K177[m[K[36m[K:[m[K[01;31m[K-[m[K bad apple?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[Konly check [01;31m[K-[m[K>executing on branch
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K[01;31m[K-[m[K stops double jump and [01;31m[K-[m[K>executing=false can just load different address
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K  [01;31m[K-[m[K OTOH, not needed if copying primitive body to RAM
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K182[m[K[36m[K:[m[K[01;31m[K-[m[K [01;31m[K-[m[K>executing=false exists very few times in source
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K183[m[K[36m[K:[m[K[01;31m[K-[m[K [01;31m[K-[m[Kfno[01;31m[K-[m[KPIC produces TCO!
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K185[m[K[36m[K:[m[K[01;31m[K-[m[K doesnt have to be perfect
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K[01;31m[K-[m[K compare cycles to combined primitive at runtime to make sure worth it
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K187[m[K[36m[K:[m[K  [01;31m[K-[m[K see cycle counting post
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K188[m[K[36m[K:[m[K  [01;31m[K-[m[K separate add[01;31m[K-[m[Kon could check all combos and error if not as predicted
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K190[m[K[36m[K:[m[K[01;31m[K-[m[K someone said this was fastest on x86 but how? switch in while?
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K210[m[K[36m[K:[m[K    log_none("Primitive count: %d of %d (%d left)\n",forth_primitives_len,expected_count,expected_count[01;31m[K-[m[Kforth_primitives_len);
[35m[Ksrc/main.c[m[K[36m[K:[m[K[32m[K212[m[K[36m[K:[m[K    //Configure device specific settings [01;31m[K-[m[K SDL2 on PC and timer on calculator
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K57[m[K[36m[K:[m[K    //Size of new memory record being created [01;31m[K-[m[K struct HeaderInfo with one object with its size member set to zero
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K    //size: linked list [01;31m[K-[m[K distance to next tab/split pair
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K    heap_info[01;31m[K-[m[K>size=record_size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K61[m[K[36m[K:[m[K    heap_info[01;31m[K-[m[K>tab=tab;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K    heap_info[01;31m[K-[m[K>split=split;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K63[m[K[36m[K:[m[K    //objects[]: linked list [01;31m[K-[m[K distance to next object or 0 for end of list
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K    ((struct ObjectInfo *)(heap_info[01;31m[K-[m[K>objects))[01;31m[K-[m[K>size=0;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K        if ((heap_info[01;31m[K-[m[K>tab==tab)&&(heap_info[01;31m[K-[m[K>split==split))
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K94[m[K[36m[K:[m[K            //Selected heap found [01;31m[K-[m[K record start and address
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K96[m[K[36m[K:[m[K            obj_end=(uint32_t *)(heap_ptr+((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>size);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K97[m[K[36m[K:[m[K            obj_size=obj_end[01;31m[K-[m[Kobj_start;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K99[m[K[36m[K:[m[K        heap_ptr+=((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K        if ((uintptr_t)(heap_end[01;31m[K-[m[Kobj_end)<XRAM_SIZE/sizeof(uint32_t)) copy_count=heap_end[01;31m[K-[m[Kobj_end;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K124[m[K[36m[K:[m[K            *(obj_end[01;31m[K-[m[Ki[01;31m[K-[m[K1)=*(obj_end[01;31m[K-[m[Ki[01;31m[K-[m[Kcopy_count[01;31m[K-[m[K1);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K141[m[K[36m[K:[m[K    return (uint32_t)(heap+HEAP_SIZE[01;31m[K-[m[Kheap_ptr);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K146[m[K[36m[K:[m[K    return HEAP_SIZE[01;31m[K-[m[Kheap_left();
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K152[m[K[36m[K:[m[K    for (int i=0;i<TAB_COUNT*SPLIT_COUNT[01;31m[K-[m[K1;i++)
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K153[m[K[36m[K:[m[K        heap_ptr+=((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K157[m[K[36m[K:[m[K//heap_ptr [01;31m[K-[m[K address of split heap as returned by get_split_heap
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K    ((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>size+=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    heap_ptr=((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>objects;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K179[m[K[36m[K:[m[K    while(((struct ObjectInfo *)heap_ptr)[01;31m[K-[m[K>size)
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K        heap_ptr+=((struct ObjectInfo *)heap_ptr)[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K183[m[K[36m[K:[m[K    ((struct ObjectInfo *)heap_ptr)[01;31m[K-[m[K>size=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K    ((struct ObjectInfo *)(heap_ptr+size))[01;31m[K-[m[K>size=0;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K189[m[K[36m[K:[m[K    return ((struct ObjectInfo *)heap_ptr)[01;31m[K-[m[K>data;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K200[m[K[36m[K:[m[K    heap_ptr=((struct HeapInfo *)heap_ptr)[01;31m[K-[m[K>objects;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K        uint32_t obj_size=((struct ObjectInfo *)heap_ptr)[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K258[m[K[36m[K:[m[K    uint8_t *src=object+object_info[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K260[m[K[36m[K:[m[K    uint32_t copy_size=heap_info[01;31m[K-[m[K>size[01;31m[K-[m[K(object[01;31m[K-[m[Kheap_ptr);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K261[m[K[36m[K:[m[K    //Memory range overlaps [01;31m[K-[m[K memmove instead of memcpy
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K265[m[K[36m[K:[m[K    heap_info[01;31m[K-[m[K>size+=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K266[m[K[36m[K:[m[K    object_info[01;31m[K-[m[K>size+=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K285[m[K[36m[K:[m[K    uint8_t *src=object+object_info[01;31m[K-[m[K>size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K286[m[K[36m[K:[m[K    //Memory range overlaps [01;31m[K-[m[K memmove instead of memcpy
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K287[m[K[36m[K:[m[K    memmove(src[01;31m[K-[m[Ksize,src,size);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K    heap_info[01;31m[K-[m[K>size[01;31m[K-[m[K=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K291[m[K[36m[K:[m[K    object_info[01;31m[K-[m[K>size[01;31m[K-[m[K=size;
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K309[m[K[36m[K:[m[K        //No change in size [01;31m[K-[m[K nothing to do
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K314[m[K[36m[K:[m[K        return expand_object(new_size[01;31m[K-[m[Kdata_size,ID,heap_ptr);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K318[m[K[36m[K:[m[K        return reduce_object(data_size[01;31m[K-[m[Knew_size,ID,heap_ptr);
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K321[m[K[36m[K:[m[K    //Should not reach here [01;31m[K-[m[K silence error
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K325[m[K[36m[K:[m[K//Size of object EXCLUDING header [01;31m[K-[m[K data only
[35m[Ksrc/mem.c[m[K[36m[K:[m[K[32m[K328[m[K[36m[K:[m[K    return object[01;31m[K-[m[K>size[01;31m[K-[m[Kfldsiz(ObjectInfo,size);
[35m[Ksrc/dummy.c[m[K[36m[K:[m[K[32m[K34[m[K[36m[K:[m[K    draw_text(title,pos,COL_GREEN,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/dummy.c[m[K[36m[K:[m[K[32m[K40[m[K[36m[K:[m[K            draw_text("Start",pos,COL_GREEN,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/dummy.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K            draw_text("Resume",pos,COL_GREEN,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/dummy.c[m[K[36m[K:[m[K[32m[K46[m[K[36m[K:[m[K            draw_text("Redraw",pos,COL_GREEN,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/dummy.c[m[K[36m[K:[m[K[32m[K85[m[K[36m[K:[m[K    //Shouldn't reach here [01;31m[K-[m[K added to silence warning
[35m[Ksrc/getkey.h[m[K[36m[K:[m[K[32m[K13[m[K[36m[K:[m[K        //Unmodified keycode not accounting for modifier keys [01;31m[K-[m[K must appear in this order
[35m[Ksrc/getkey.h[m[K[36m[K:[m[K[32m[K228[m[K[36m[K:[m[K    int getkey_text(bool wait,int *modifier,struct KeyRemap *key_list);     //getkey for text editing [01;31m[K-[m[K accounts for shift, 
[35m[Ksrc/compatibility.h[m[K[36m[K:[m[K[32m[K41[m[K[36m[K:[m[K    //TODO: doesn't [01;31m[K-[m[K1 as int16_t (ie color_t) also encode as transparent?
[35m[Ksrc/compatibility.h[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K    #define COL_TRANS       [01;31m[K-[m[K1  
[35m[Ksrc/compatibility.h[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K    //Whether ON key is currently down [01;31m[K-[m[K updated in interrupt on calculator and thread on PC
[35m[Ksrc/compatibility.h[m[K[36m[K:[m[K[32m[K155[m[K[36m[K:[m[K        #define WINDOW_TITLE    "SDL2 wrapper for fx[01;31m[K-[m[KCG50"
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K12[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap.h"
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K26[m[K[36m[K:[m[K        if (strlen(addition)>SHELL_PATH_MAX[01;31m[K-[m[K1)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K38[m[K[36m[K:[m[K        //[01;31m[K-[m[K2 for terminating 0 and added / between directories
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K        if (strlen(path)+strlen(addition)>SHELL_PATH_MAX[01;31m[K-[m[K2)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K116[m[K[36m[K:[m[K            error_msg="destination exists [01;31m[K-[m[K delete before copying\n";
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K134[m[K[36m[K:[m[K            error_msg="file is read[01;31m[K-[m[Konly\n";
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K149[m[K[36m[K:[m[K            error_msg="destination exists [01;31m[K-[m[K delete before moving\n";
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K172[m[K[36m[K:[m[K    {"cd",      SHELL_CMD_CD,     [01;31m[K-[m[K1, "change directory"},
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K176[m[K[36m[K:[m[K    {"help",    SHELL_CMD_HELP,   [01;31m[K-[m[K1, "display help on commands"},
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K177[m[K[36m[K:[m[K    {"ll",      SHELL_CMD_LL,     [01;31m[K-[m[K1, "list directory contents and sizes"},
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[K    {"ls",      SHELL_CMD_LS,     [01;31m[K-[m[K1, "list directory contents"},
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K209[m[K[36m[K:[m[K            if (endings[i].text[j]!=path[path_len[01;31m[K-[m[Kending_len+j])
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K                //Found mistmatched character [01;31m[K-[m[K not a match
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K217[m[K[36m[K:[m[K        //Last ending was a match [01;31m[K-[m[K return special type
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K246[m[K[36m[K:[m[K    const char *allowed_chars="/[01;31m[K-[m[K_.0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K257[m[K[36m[K:[m[K    //Exception [01;31m[K-[m[K can't fetch info on path if root directory on calculator. Handle manually.
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K298[m[K[36m[K:[m[K            console_text_default(" [01;31m[K-[m[K ",console);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K311[m[K[36m[K:[m[K//IMPORTANT! [01;31m[K-[m[K called on calculator with gint_world_switch so don't call gint functions (dupate, dclear, etc) or will crash!
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K321[m[K[36m[K:[m[K    const char *input_buffer=temp_args[01;31m[K-[m[K>input_buffer;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K322[m[K[36m[K:[m[K    struct ConsoleInfo *console=temp_args[01;31m[K-[m[K>console;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K323[m[K[36m[K:[m[K    char *shell_path=temp_args[01;31m[K-[m[K>path;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K372[m[K[36m[K:[m[K    //Nothing to process [01;31m[K-[m[K return
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K398[m[K[36m[K:[m[K            if (commands[i].arg_count!=[01;31m[K-[m[K1)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K400[m[K[36m[K:[m[K                if (commands[i].arg_count!=arg_count[01;31m[K-[m[K1)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K465[m[K[36m[K:[m[K                    //[01;31m[K-[m[K1 to make room for terminating 0
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K466[m[K[36m[K:[m[K                    byte_count=fread(cat_buffer,1,SHELL_CAT_SIZE[01;31m[K-[m[K1,cat_file); 
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K487[m[K[36m[K:[m[K                    //No arguments [01;31m[K-[m[K "cd" is first argument. Change path to root.
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K492[m[K[36m[K:[m[K                    //One argument [01;31m[K-[m[K use argument as path
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K590[m[K[36m[K:[m[K                    //Error [01;31m[K-[m[K destination exists. Delete before copying.
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K654[m[K[36m[K:[m[K                    //No arguments [01;31m[K-[m[K show help for all commands
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K659[m[K[36m[K:[m[K                    //One argument [01;31m[K-[m[K show help for command
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K686[m[K[36m[K:[m[K                    //No arguments [01;31m[K-[m[K first argument is "ll"/"ls" itself. Use path as directory.
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K692[m[K[36m[K:[m[K                    //One argument [01;31m[K-[m[K use argument as path
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K722[m[K[36m[K:[m[K                    //Target path is directory [01;31m[K-[m[K show contents
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K737[m[K[36m[K:[m[K                        if (strcmp(dir[01;31m[K-[m[K>d_name,".")&&strcmp(dir[01;31m[K-[m[K>d_name,".."))
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K740[m[K[36m[K:[m[K                            if (dir[01;31m[K-[m[K>d_type==DT_DIR)        file_type=FILE_TYPE_DIR;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K741[m[K[36m[K:[m[K                            else if (dir[01;31m[K-[m[K>d_type==DT_REG)   file_type=FILE_TYPE_REG;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K743[m[K[36m[K:[m[K                            color_fg=file_color(dir[01;31m[K-[m[K>d_name,file_type);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K747[m[K[36m[K:[m[K                                //ls [01;31m[K-[m[K print filename and prevent name from wrapping at screen edge
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K751[m[K[36m[K:[m[K                                    if (print_width+strlen(SHELL_LS_SEPARATOR)+strlen(dir[01;31m[K-[m[K>d_name)>=SHELL_LS_WIDTH)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K766[m[K[36m[K:[m[K                                console_text(dir[01;31m[K-[m[K>d_name,color_fg,SHELL_COL_BG,console);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K767[m[K[36m[K:[m[K                                print_width+=strlen(dir[01;31m[K-[m[K>d_name);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K772[m[K[36m[K:[m[K                                //ll [01;31m[K-[m[K print one file/directory and its size per line
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K777[m[K[36m[K:[m[K                                    //Direcotry [01;31m[K-[m[K no size to print since reads as [01;31m[K-[m[K1 on calculator
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K783[m[K[36m[K:[m[K                                    //File or unknown type [01;31m[K-[m[K print size 
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K787[m[K[36m[K:[m[K                                    int result=add_path(new_path,dir[01;31m[K-[m[K>d_name,file_path);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K802[m[K[36m[K:[m[K                                    //Convert file size to human readable form [01;31m[K-[m[K ie 1.2M rather than 1234567
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K816[m[K[36m[K:[m[K                                    for (int i=0;i<(int)(SHELL_LL_WIDTH[01;31m[K-[m[Knum_len);i++)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K824[m[K[36m[K:[m[K                                console_text(dir[01;31m[K-[m[K>d_name,color_fg,SHELL_COL_BG,console);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K845[m[K[36m[K:[m[K                    //Target path points to file [01;31m[K-[m[K print name
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K849[m[K[36m[K:[m[K                        //Forward slash not found in path [01;31m[K-[m[K should never happen but just in case
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K859[m[K[36m[K:[m[K                        //ll [01;31m[K-[m[K print size of file
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K869[m[K[36m[K:[m[K                        //Convert file size to human readable form [01;31m[K-[m[K ie 1.2M rather than 1234567
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K880[m[K[36m[K:[m[K                            for (int i=0;i<(int)(SHELL_LL_WIDTH[01;31m[K-[m[Knum_len);i++)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K888[m[K[36m[K:[m[K                    //Print name depending on type [01;31m[K-[m[K file_type set above after stat
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K919[m[K[36m[K:[m[K                    //Error [01;31m[K-[m[K target path already exists
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K989[m[K[36m[K:[m[K                    //Error [01;31m[K-[m[K destination exists. Delete before moving.
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1045[m[K[36m[K:[m[K                //Check if file is read[01;31m[K-[m[Konly based on file extension
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1127[m[K[36m[K:[m[K                    //Target exists [01;31m[K-[m[K exit silently without error
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1191[m[K[36m[K:[m[K        console=&shell[01;31m[K-[m[K>console;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1198[m[K[36m[K:[m[K            shell[01;31m[K-[m[K>input_text,
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1199[m[K[36m[K:[m[K            shell[01;31m[K-[m[K>input_copy_text,
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1204[m[K[36m[K:[m[K            shell[01;31m[K-[m[K>history,
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1205[m[K[36m[K:[m[K            shell[01;31m[K-[m[K>history_texts,
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1212[m[K[36m[K:[m[K        console[01;31m[K-[m[K>reset_input=true;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1213[m[K[36m[K:[m[K        console[01;31m[K-[m[K>modifier=MODIFIER_ALPHA_LOWER_LOCK;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1214[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input_copied=false;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1220[m[K[36m[K:[m[K        strcpy(shell[01;31m[K-[m[K>path,"/");
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1224[m[K[36m[K:[m[K        //Resume or Redraw [01;31m[K-[m[K reuse existing memory for console
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1225[m[K[36m[K:[m[K        shell=(struct ShellInfo *)(object_address(SHELL_ID_CONSOLE,heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1226[m[K[36m[K:[m[K        console=&shell[01;31m[K-[m[K>console;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1242[m[K[36m[K:[m[K        if (console[01;31m[K-[m[K>reset_input)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1244[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.text[0].character=0;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1245[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.cursor=0;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1246[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.len=0;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1249[m[K[36m[K:[m[K            console_text(shell[01;31m[K-[m[K>path,SHELL_COL_DIR,SHELL_COL_BG,console);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1251[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input_copied=false;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1253[m[K[36m[K:[m[K        console[01;31m[K-[m[K>reset_input=false;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1256[m[K[36m[K:[m[K        if (redraw_modifier) draw_modifier(console[01;31m[K-[m[K>modifier);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1272[m[K[36m[K:[m[K        int old_modifier=console[01;31m[K-[m[K>modifier;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1273[m[K[36m[K:[m[K        int key=getkey_text(true,&console[01;31m[K-[m[K>modifier,NULL);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1279[m[K[36m[K:[m[K        if (old_modifier!=console[01;31m[K-[m[K>modifier) redraw_modifier=true;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1286[m[K[36m[K:[m[K            //Printable character [01;31m[K-[m[K add to input line
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1300[m[K[36m[K:[m[K                    if (console[01;31m[K-[m[K>input.len==0)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1302[m[K[36m[K:[m[K                        //No input on line [01;31m[K-[m[K don't cancel
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1308[m[K[36m[K:[m[K                    if (console[01;31m[K-[m[K>input.len>=SHELL_INPUT_MAX[01;31m[K-[m[K(uint32_t)strlen(cancel_text))
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1311[m[K[36m[K:[m[K                        console[01;31m[K-[m[K>input.len=SHELL_INPUT_MAX[01;31m[K-[m[Kstrlen(cancel_text)[01;31m[K-[m[K1;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1312[m[K[36m[K:[m[K                        console[01;31m[K-[m[K>input.cursor=SHELL_INPUT_MAX[01;31m[K-[m[Kstrlen(cancel_text)[01;31m[K-[m[K1;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1319[m[K[36m[K:[m[K                    for (uint32_t i=0;i<console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1321[m[K[36m[K:[m[K                        console_char(console[01;31m[K-[m[K>input.text[i].character,console[01;31m[K-[m[K>input.text[i].fg,console[01;31m[K-[m[K>input.text[i].bg,console);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1324[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>reset_input=true;
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1334[m[K[36m[K:[m[K                        copy_console_text(&console[01;31m[K-[m[K>input,input_buffer,SHELL_INPUT_MAX,0);
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1337[m[K[36m[K:[m[K                        struct ProcessInput temp_args={input_buffer,console,shell[01;31m[K-[m[K>path};
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1353[m[K[36m[K:[m[K                    //DEL with alpha active [01;31m[K-[m[K treat as DEL so don't need to remove alpha to delete
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1363[m[K[36m[K:[m[K                        //System key [01;31m[K-[m[K return to window manager to handle key
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1368[m[K[36m[K:[m[K                        //No key found [01;31m[K-[m[K don't redraw screen
[35m[Ksrc/shell.c[m[K[36m[K:[m[K[32m[K1375[m[K[36m[K:[m[K    //Shouldn't reach here [01;31m[K-[m[K added to silence warning
[35m[Ksrc/logging.h[m[K[36m[K:[m[K[32m[K4[m[K[36m[K:[m[K    #include "logging[01;31m[K-[m[Kcustom.h"
[35m[Ksrc/logging.h[m[K[36m[K:[m[K[32m[K7[m[K[36m[K:[m[K        //Compiling for calculator [01;31m[K-[m[K remove all log functions
[35m[Ksrc/shell.h[m[K[36m[K:[m[K[32m[K29[m[K[36m[K:[m[K    #define SHELL_CONSOLE_STRING    "Calculator shell for fx[01;31m[K-[m[KCG50\nType 'help' for more info.\n" 
[35m[Ksrc/shell.h[m[K[36m[K:[m[K[32m[K45[m[K[36m[K:[m[K    #define SHELL_LL_WIDTH      (TEXT_INT32_HUMAN_SIZE[01;31m[K-[m[K1)
[35m[Ksrc/key-remap.c[m[K[36m[K:[m[K[32m[K3[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap.h"
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K52[m[K[36m[K:[m[K            uint32_t current_tab=heap_info[01;31m[K-[m[K>tab;
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K53[m[K[36m[K:[m[K            uint32_t current_split=heap_info[01;31m[K-[m[K>split;
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K78[m[K[36m[K:[m[K            if (windows[tab].split[split].ID==ID_NONE) prog_name="   [01;31m[K-[m[K[01;31m[K-[m[K   ";
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K84[m[K[36m[K:[m[K            mem_buffer[TEXT_INT32_HUMAN_SIZE[01;31m[K-[m[K1]=0;
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K88[m[K[36m[K:[m[K            for (int i=0;i<TEXT_INT32_HUMAN_SIZE[01;31m[K-[m[K1;i++)
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K103[m[K[36m[K:[m[K    //Redraw only [01;31m[K-[m[K exit
[35m[Ksrc/memory_manager.c[m[K[36m[K:[m[K[32m[K133[m[K[36m[K:[m[K    //Shouldn't reach here [01;31m[K-[m[K added to silence warning
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K8[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kcompatibility.h"
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K9[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K53[m[K[36m[K:[m[K    //#define FORTH_MEM_WORD_HEADERS  512     //much when memory runs out. Exact amount not important [01;31m[K-[m[K prevents
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K    #define FORTH_MEM_WORD_HEADERS  128     //much when memory runs out. Exact amount not important [01;31m[K-[m[K prevents
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K66[m[K[36m[K:[m[K    #define FORTH_CONSOLE_STRING    "Forth for fx[01;31m[K-[m[KCG50\n"
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K91[m[K[36m[K:[m[K    #define FORTH_PRIM_NOT_FOUND            [01;31m[K-[m[K1
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K173[m[K[36m[K:[m[K        //Flexible Array Member [01;31m[K-[m[K memory allocated after struct holds definition data
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K181[m[K[36m[K:[m[K        //Flexible Array Member [01;31m[K-[m[K memory allocated after struct holds definition data
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K189[m[K[36m[K:[m[K        //Flexible Array Member [01;31m[K-[m[K memory allocated after struct holds definition data
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K203[m[K[36m[K:[m[K        //Flexible Array Member [01;31m[K-[m[K memory allocated after struct holds definition data
[35m[Ksrc/forth.h[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K        //Flexible Array Member [01;31m[K-[m[K memory allocated after struct holds definition data
[35m[Ksrc/error.c[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K                printf("Error [01;31m[K-[m[K font not found!\n");
[35m[Ksrc/error.c[m[K[36m[K:[m[K[32m[K88[m[K[36m[K:[m[K        new_pos.x+=width/2[01;31m[K-[m[Ktext_width(print_text,font)/2;
[35m[Ksrc/error.c[m[K[36m[K:[m[K[32m[K91[m[K[36m[K:[m[K        if (i==0) new_pos.y[01;31m[K-[m[K=ERROR_SPACING_Y;
[35m[Ksrc/error.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K        else new_pos.y+=ERROR_SPACING_Y[01;31m[K-[m[Kfont_height(font);
[35m[Ksrc/error.c[m[K[36m[K:[m[K[32m[K94[m[K[36m[K:[m[K        draw_text(print_text,new_pos,ERROR_COL_FG,[01;31m[K-[m[K1,false,font);
[35m[Ksrc/forth-primitives.h[m[K[36m[K:[m[K[32m[K6[m[K[36m[K:[m[K    #include "forth[01;31m[K-[m[Kengine.h"
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K8[m[K[36m[K:[m[K#include "forth[01;31m[K-[m[Kprocess.h"
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K11[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap.h"
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K12[m[K[36m[K:[m[K#include "key[01;31m[K-[m[Kremap[01;31m[K-[m[Kpc.h"
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K49[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>input.text[start+word_len[01;31m[K-[m[K1].character=='"') in_quote=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K55[m[K[36m[K:[m[K                //Word too long [01;31m[K-[m[K color but do not check if primitive or secondary
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K64[m[K[36m[K:[m[K                    word_buffer[j[01;31m[K-[m[Kstart]=console[01;31m[K-[m[K>input.text[j].character;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K65[m[K[36m[K:[m[K                    word_buffer[j[01;31m[K-[m[Kstart+1]=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K136[m[K[36m[K:[m[K                        bool cursor_on_word=(console[01;31m[K-[m[K>input.cursor>=start)&&(console[01;31m[K-[m[K>input.cursor<=start+word_len);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K139[m[K[36m[K:[m[K                            //Cursor is on secondary word [01;31m[K-[m[K don't color as unknown since still typing
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.text[j].fg=word_color;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K209[m[K[36m[K:[m[K        int index=FORTH_STACK_SHOW_COUNT[01;31m[K-[m[Ki[01;31m[K-[m[K1;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K214[m[K[36m[K:[m[K            text_hex32_padded(*(engine[01;31m[K-[m[K>stack+index+1),text_buffer+2,8);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K218[m[K[36m[K:[m[K            //Out of stack values [01;31m[K-[m[K print placeholder instead
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K219[m[K[36m[K:[m[K            strcpy(text_buffer+2," [01;31m[K-[m[K[01;31m[K-[m[K     ");
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K234[m[K[36m[K:[m[K    draw_line_horz(x,x+FORTH_STACK_WIDTH[01;31m[K-[m[K1,pos.y,FORTH_STACK_BG);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K276[m[K[36m[K:[m[K                draw_text(key_texts[i].key,temp_pos,key_texts[i].fg_color,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K286[m[K[36m[K:[m[K            pos=draw_text(key_texts[i].remapped_key,pos,FORTH_STACK_FG,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K            pos=draw_text(key_texts[i].remapped_key_shift,pos,COL_SHIFT,[01;31m[K-[m[K1,false,FONT_5x8);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K313[m[K[36m[K:[m[K            //No error [01;31m[K-[m[K nothing to do
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K344[m[K[36m[K:[m[K            uint32_t word_len=next_word_source(compile[01;31m[K-[m[K>error_word,&start);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K346[m[K[36m[K:[m[K                console_char_default(compile[01;31m[K-[m[K>error_word[i],console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K361[m[K[36m[K:[m[K            console_text_default(engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K369[m[K[36m[K:[m[K            console_text_default(engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K382[m[K[36m[K:[m[K            console_text_default("Break [01;31m[K-[m[K ON key pressed\n",console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K395[m[K[36m[K:[m[K            console_text_default(engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K400[m[K[36m[K:[m[K            console_text_default(engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K434[m[K[36m[K:[m[K            //No error message for error [01;31m[K-[m[K should never reach here unless forgot to add error message
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K446[m[K[36m[K:[m[K    //Output message for error set in Forth engine [01;31m[K-[m[K ie inside of primitive
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K447[m[K[36m[K:[m[K    switch (forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K455[m[K[36m[K:[m[K            if (forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error==FORTH_ENGINE_ERROR_INTERPRET_ONLY)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K457[m[K[36m[K:[m[K            else if (forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error==FORTH_ENGINE_ERROR_COMPILE_ONLY)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K461[m[K[36m[K:[m[K            uint32_t word_len=next_word_source(compile[01;31m[K-[m[K>error_word,&start);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K463[m[K[36m[K:[m[K                console_char_default(compile[01;31m[K-[m[K>error_word[i],console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K468[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K475[m[K[36m[K:[m[K            console_text_default("Word has no run[01;31m[K-[m[Ktime behavior for EXECUTE: ",console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K476[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_word,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K481[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K486[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_num,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K493[m[K[36m[K:[m[K            console_text_default("Break [01;31m[K-[m[K out of return stack space\n",console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K497[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_word,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K502[m[K[36m[K:[m[K            console_text_default(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error_word,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K506[m[K[36m[K:[m[K            //No error message for error [01;31m[K-[m[K should never reach here unless forgot to add error message
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K509[m[K[36m[K:[m[K            text_int32(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>error,num_buffer);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K519[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>input.len==0) return COMMAND_NONE;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K524[m[K[36m[K:[m[K    color_input(console,true,compile[01;31m[K-[m[K>words);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K527[m[K[36m[K:[m[K    for (uint32_t i=0;i<console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K529[m[K[36m[K:[m[K        console_char(console[01;31m[K-[m[K>input.text[i].character,console[01;31m[K-[m[K>input.text[i].fg,console[01;31m[K-[m[K>input.text[i].bg,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K531[m[K[36m[K:[m[K    console[01;31m[K-[m[K>reset_input=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K538[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.visible=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K544[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>index=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K545[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>control_stack[01;31m[K-[m[K>bytes_left=FORTH_MEM_CONTROL_STACK[01;31m[K-[m[Ksizeof(struct ForthControlInfo);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K546[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>locals[01;31m[K-[m[K>index=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K547[m[K[36m[K:[m[K    compile[01;31m[K-[m[K>locals[01;31m[K-[m[K>bytes_left=FORTH_MEM_LOCALS[01;31m[K-[m[Ksizeof(struct ForthLocalsInfo);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K551[m[K[36m[K:[m[K    copy_console_text(&console[01;31m[K-[m[K>input,input_buffer,FORTH_INPUT_MAX,0);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K552[m[K[36m[K:[m[K    int process_result=process_source(forth[01;31m[K-[m[K>engine,input_buffer,compile);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K554[m[K[36m[K:[m[K    //TODO: check engine[01;31m[K-[m[K>exit_program set by BYE and exit
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K561[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.visible=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K564[m[K[36m[K:[m[K    int result=resize_object(FORTH_MEM_CONTROL_STACK,FORTH_ID_CONTROL_STACK,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K573[m[K[36m[K:[m[K    result=resize_object(FORTH_MEM_LOCALS,FORTH_ID_LOCALS,compile[01;31m[K-[m[K>heap_ptr);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K587[m[K[36m[K:[m[K        //No error from processing source [01;31m[K-[m[K nothing to do
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K597[m[K[36m[K:[m[K        output_error_source(process_result,forth[01;31m[K-[m[K>engine,compile,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K600[m[K[36m[K:[m[K    //Check compile state [01;31m[K-[m[K definition can't be left open
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K601[m[K[36m[K:[m[K    if ((forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>state==FORTH_STATE_COMPILE)||((forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>state==FORTH_STATE_INTERPRET)&&(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>in_bracket==true)))
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K603[m[K[36m[K:[m[K        //Definition left open [01;31m[K-[m[K cancel word
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K604[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=compile[01;31m[K-[m[K>words[01;31m[K-[m[K>header;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K614[m[K[36m[K:[m[K            printf("name: %s, last: %d, done: %d\n",secondary[01;31m[K-[m[K>name,secondary[01;31m[K-[m[K>last,secondary[01;31m[K-[m[K>done);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K616[m[K[36m[K:[m[K            //Check if at end of list first since [01;31m[K-[m[K>done not valid unless [01;31m[K-[m[K>last is false
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K617[m[K[36m[K:[m[K            if (secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K620[m[K[36m[K:[m[K                if (secondary[01;31m[K-[m[K>done==false)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K622[m[K[36m[K:[m[K                    //Reached unfinished header [01;31m[K-[m[K mark as end of list of headers
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K624[m[K[36m[K:[m[K                    secondary[01;31m[K-[m[K>last=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K626[m[K[36m[K:[m[K                    rewind_name_bytes+=secondary[01;31m[K-[m[K>name_len+1;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K638[m[K[36m[K:[m[K                //Reached end of list [01;31m[K-[m[K done looping
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K650[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>words[01;31m[K-[m[K>index[01;31m[K-[m[K=header_count;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K651[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>words[01;31m[K-[m[K>bytes_left+=rewind_header_bytes;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K652[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>index[01;31m[K-[m[K=rewind_name_bytes;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K653[m[K[36m[K:[m[K        compile[01;31m[K-[m[K>word_names[01;31m[K-[m[K>bytes_left+=rewind_name_bytes;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K656[m[K[36m[K:[m[K        if (compile[01;31m[K-[m[K>colon_word_exists==true)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K658[m[K[36m[K:[m[K            if (compile[01;31m[K-[m[K>save_type!=FORTH_SECONDARY_UNDEFINED) 
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K659[m[K[36m[K:[m[K                compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>address=(void(**)(struct ForthEngine *))(compile[01;31m[K-[m[K>definitions[01;31m[K-[m[K>data+compile[01;31m[K-[m[K>save_offset);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K660[m[K[36m[K:[m[K            else compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>address=NULL;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K661[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>offset=compile[01;31m[K-[m[K>save_offset;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K662[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>definition_size=compile[01;31m[K-[m[K>save_definition_size;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K663[m[K[36m[K:[m[K            compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>type=compile[01;31m[K-[m[K>save_type;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K670[m[K[36m[K:[m[K            console_text_default(compile[01;31m[K-[m[K>colon_word[01;31m[K-[m[K>name,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K678[m[K[36m[K:[m[K        forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>state=FORTH_STATE_INTERPRET;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K679[m[K[36m[K:[m[K        forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>in_bracket=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K750[m[K[36m[K:[m[K        compile.definitions[01;31m[K-[m[K>index=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K751[m[K[36m[K:[m[K        compile.definitions[01;31m[K-[m[K>bytes_left=FORTH_MEM_DEFINITIONS[01;31m[K-[m[Ksizeof(struct ForthDefinitionsInfo);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K764[m[K[36m[K:[m[K        compile.words[01;31m[K-[m[K>index=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K765[m[K[36m[K:[m[K        compile.words[01;31m[K-[m[K>bytes_left=FORTH_MEM_WORD_HEADERS[01;31m[K-[m[Ksizeof(struct ForthWordHeaderInfo);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K768[m[K[36m[K:[m[K        compile.words[01;31m[K-[m[K>header[0].last=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K781[m[K[36m[K:[m[K        compile.word_names[01;31m[K-[m[K>index=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K782[m[K[36m[K:[m[K        compile.word_names[01;31m[K-[m[K>bytes_left=FORTH_MEM_WORD_NAMES[01;31m[K-[m[Ksizeof(struct ForthWordNameInfo);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K794[m[K[36m[K:[m[K        //No need to initialize control stack [01;31m[K-[m[K reinitialized every time source begins to be processed
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K806[m[K[36m[K:[m[K        //No need to initialize locals [01;31m[K-[m[K reinitialized every time source begins to be processed
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K810[m[K[36m[K:[m[K        console=&forth[01;31m[K-[m[K>console;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K817[m[K[36m[K:[m[K            forth[01;31m[K-[m[K>input_text,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K818[m[K[36m[K:[m[K            forth[01;31m[K-[m[K>input_copy_text,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K823[m[K[36m[K:[m[K            forth[01;31m[K-[m[K>history,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K824[m[K[36m[K:[m[K            forth[01;31m[K-[m[K>history_texts,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K831[m[K[36m[K:[m[K        console[01;31m[K-[m[K>reset_input=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K832[m[K[36m[K:[m[K        console[01;31m[K-[m[K>modifier=MODIFIER_ALPHA_LOWER_LOCK;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K833[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input_copied=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K839[m[K[36m[K:[m[K        forth[01;31m[K-[m[K>draw_stack=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K842[m[K[36m[K:[m[K        forth[01;31m[K-[m[K>engine=(struct ForthEngine *)FORTH_ENGINE_ADDRESS;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K843[m[K[36m[K:[m[K        forth_init_engine(forth[01;31m[K-[m[K>engine,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K859[m[K[36m[K:[m[K            CONS_WHOLE_WIDTH[01;31m[K-[m[KFORTH_STACK_CHAR_WIDTH,
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K867[m[K[36m[K:[m[K        //Resume or Redraw [01;31m[K-[m[K reuse existing memory for console
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K868[m[K[36m[K:[m[K        forth=(struct ForthInfo *)(object_address(FORTH_ID_CONSOLE,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K869[m[K[36m[K:[m[K        console=&forth[01;31m[K-[m[K>console;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K873[m[K[36m[K:[m[K        *forth[01;31m[K-[m[K>engine=forth[01;31m[K-[m[K>engine_copy;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K876[m[K[36m[K:[m[K        forth_data=object_address(FORTH_ID_DATA,compile.heap_ptr)[01;31m[K-[m[K>data;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K877[m[K[36m[K:[m[K        compile.definitions=(struct ForthDefinitionsInfo *)(object_address(FORTH_ID_DEFINITIONS,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K878[m[K[36m[K:[m[K        compile.words=(struct ForthWordHeaderInfo *)(object_address(FORTH_ID_WORD_HEADERS,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K879[m[K[36m[K:[m[K        compile.word_names=(struct ForthWordNameInfo *)(object_address(FORTH_ID_WORD_NAMES,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K880[m[K[36m[K:[m[K        compile.control_stack=(struct ForthControlInfo *)(object_address(FORTH_ID_CONTROL_STACK,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K881[m[K[36m[K:[m[K        compile.locals=(struct ForthLocalsInfo *)(object_address(FORTH_ID_LOCALS,compile.heap_ptr)[01;31m[K-[m[K>data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K884[m[K[36m[K:[m[K        struct ForthWordHeader *secondary=compile.words[01;31m[K-[m[K>header;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K885[m[K[36m[K:[m[K        while (secondary[01;31m[K-[m[K>last==false)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K888[m[K[36m[K:[m[K            secondary[01;31m[K-[m[K>address=(void (**)(struct ForthEngine *engine))(compile.definitions[01;31m[K-[m[K>data+secondary[01;31m[K-[m[K>offset);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K891[m[K[36m[K:[m[K            secondary[01;31m[K-[m[K>name=compile.word_names[01;31m[K-[m[K>names+secondary[01;31m[K-[m[K>name_offset;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K898[m[K[36m[K:[m[K        memcpy(FORTH_STACK_ADDRESS,forth[01;31m[K-[m[K>stack_copy,FORTH_STACK_SIZE);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K899[m[K[36m[K:[m[K        memcpy(FORTH_RSTACK_ADDRESS,forth[01;31m[K-[m[K>rstack_copy,FORTH_RSTACK_SIZE);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K909[m[K[36m[K:[m[K    forth_reload_engine(forth[01;31m[K-[m[K>engine,forth_data);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K922[m[K[36m[K:[m[K    if (((window.split_state==WINDOW_VSPLIT)||(window.split_state==WINDOW_WHOLE))&&(forth[01;31m[K-[m[K>draw_stack))
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K927[m[K[36m[K:[m[K        stack_text_y=console[01;31m[K-[m[K>y;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K928[m[K[36m[K:[m[K        console[01;31m[K-[m[K>x+=FORTH_STACK_WIDTH+FORTH_STACK_CONSOLE_X_OFFSET;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K929[m[K[36m[K:[m[K        console[01;31m[K-[m[K>width[01;31m[K-[m[K=FORTH_STACK_CHAR_WIDTH;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K951[m[K[36m[K:[m[K    //const char *debug_keys=": foo dup 0 do cr dup 0 do i j = if dup 1 [01;31m[K-[m[K i = if leave then .\" .\" else i j + . then loop loop drop ;\n3 foo";
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K952[m[K[36m[K:[m[K    //const char *debug_keys=": foo 6 3 do cr i begin dup while dup . leave 1 [01;31m[K-[m[K repeat loop ;\nfoo";
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K956[m[K[36m[K:[m[K    //const char *debug_keys=": a 4 ;\n: b 5 ;\n: c a b ;\n: d c + c * * ;\n: e d d * ;\ne .\nsize 4 * resize [01;31m[K-[m[K4 allot\ns\" QRSTUVW\"\ndump\n";
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K957[m[K[36m[K:[m[K    //const char *debug_keys=": a 4 ;\n: b 5 ;\n: c a b ;\n: d c + c * * ;\n: e d d * ;\ne .\n[01;31m[K-[m[K4 allot\ns\" QRSTUVW\"\ndump\n";
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K958[m[K[36m[K:[m[K    //const char *debug_keys="[01;31m[K-[m[K10 allot s\" ABCDEFGHIJKLMNOPQRSTUVWXYZ\" [01;31m[K-[m[K4 swap move [01;31m[K-[m[K16 64 dump\n";
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K969[m[K[36m[K:[m[K        if (console[01;31m[K-[m[K>reset_input)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K971[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.text[0].character=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K972[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.cursor=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K973[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.len=0;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K975[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input_copied=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K977[m[K[36m[K:[m[K        console[01;31m[K-[m[K>reset_input=false;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K980[m[K[36m[K:[m[K        if (redraw_modifier) draw_modifier(console[01;31m[K-[m[K>modifier);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K993[m[K[36m[K:[m[K                draw_forth_stack(forth[01;31m[K-[m[K>engine,stack_x,stack_y,stack_text_x,stack_text_y,height,window.split_state);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1004[m[K[36m[K:[m[K        //Whether to save to memory and exit Forth [01;31m[K-[m[K may be set by key or command so handle outside of key loop
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1009[m[K[36m[K:[m[K        int old_modifier=console[01;31m[K-[m[K>modifier;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1025[m[K[36m[K:[m[K            key=getkey_text(true,&console[01;31m[K-[m[K>modifier,forth_keys);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1031[m[K[36m[K:[m[K            if (old_modifier!=console[01;31m[K-[m[K>modifier) redraw_modifier=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1040[m[K[36m[K:[m[K            //Printable character [01;31m[K-[m[K add to input line
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1056[m[K[36m[K:[m[K                    if (console[01;31m[K-[m[K>input.len==0)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1058[m[K[36m[K:[m[K                        //No input on line [01;31m[K-[m[K don't cancel
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1067[m[K[36m[K:[m[K                    if (console[01;31m[K-[m[K>input.len>=FORTH_INPUT_MAX[01;31m[K-[m[K(uint32_t)strlen(cancel_text))
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1070[m[K[36m[K:[m[K                        console[01;31m[K-[m[K>input.len=FORTH_INPUT_MAX[01;31m[K-[m[Kstrlen(cancel_text)[01;31m[K-[m[K1;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1071[m[K[36m[K:[m[K                        console[01;31m[K-[m[K>input.cursor=FORTH_INPUT_MAX[01;31m[K-[m[Kstrlen(cancel_text)[01;31m[K-[m[K1;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1076[m[K[36m[K:[m[K                    for (uint32_t i=0;i<console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1078[m[K[36m[K:[m[K                        console_char(console[01;31m[K-[m[K>input.text[i].character,console[01;31m[K-[m[K>input.text[i].fg,console[01;31m[K-[m[K>input.text[i].bg,console);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1080[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>reset_input=true;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1100[m[K[36m[K:[m[K                    //DEL with alpha active [01;31m[K-[m[K treat as DEL so don't need to remove alpha to delete
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1107[m[K[36m[K:[m[K                    forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>stack=(int32_t*)(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>stack_base+(forth[01;31m[K-[m[K>engine[01;31m[K-[m[K>stack_count[01;31m[K-[m[K1)*FORTH_CELL_SIZE);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1114[m[K[36m[K:[m[K                        //System key [01;31m[K-[m[K set flag to save and exit so window manager can process key
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1119[m[K[36m[K:[m[K                        //No key found [01;31m[K-[m[K don't redraw screen
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1129[m[K[36m[K:[m[K            memcpy(forth[01;31m[K-[m[K>stack_copy,FORTH_STACK_ADDRESS,FORTH_STACK_SIZE);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1130[m[K[36m[K:[m[K            memcpy(forth[01;31m[K-[m[K>rstack_copy,FORTH_RSTACK_ADDRESS,FORTH_RSTACK_SIZE);
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1133[m[K[36m[K:[m[K            forth[01;31m[K-[m[K>engine_copy=*forth[01;31m[K-[m[K>engine;
[35m[Ksrc/forth.c[m[K[36m[K:[m[K[32m[K1140[m[K[36m[K:[m[K    //Shouldn't reach here [01;31m[K-[m[K added to silence warning
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K30[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text_col_fg=text_col_fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K31[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text_col_bg=text_col_bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K34[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.text=input_text;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K35[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.visible=true;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K36[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input_copy.text=input_copy_text;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K37[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input_text_max=input_text_max;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K38[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input_col_fg=input_col_fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K39[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input_col_bg=input_col_bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K42[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history=history;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K43[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_texts=history_texts;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K44[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_array_size=history_array_size;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K47[m[K[36m[K:[m[K    console[01;31m[K-[m[K>offset_input_text=(void*)input_text[01;31m[K-[m[K(void*)console;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[K    console[01;31m[K-[m[K>offset_input_copy_text=(void*)input_copy_text[01;31m[K-[m[K(void*)console;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K49[m[K[36m[K:[m[K    console[01;31m[K-[m[K>offset_history=(void*)history[01;31m[K-[m[K(void*)console;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K    console[01;31m[K-[m[K>offset_history_texts=(void*)history_texts[01;31m[K-[m[K(void*)console;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K56[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.text=(struct ConsoleChar*)(((void*)console)+console[01;31m[K-[m[K>offset_input_text);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K57[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input_copy.text=(struct ConsoleChar*)(((void*)console)+console[01;31m[K-[m[K>offset_input_copy_text);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K58[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history=(struct ConsoleInput*)(((void*)console)+console[01;31m[K-[m[K>offset_history);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_texts=(struct ConsoleChar*)(((void*)console)+console[01;31m[K-[m[K>offset_history_texts);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K60[m[K[36m[K:[m[K    for (int i=0;i<console[01;31m[K-[m[K>history_array_size;i++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K62[m[K[36m[K:[m[K        console[01;31m[K-[m[K>history[i].text=console[01;31m[K-[m[K>history_texts+i*console[01;31m[K-[m[K>input_text_max;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K68[m[K[36m[K:[m[K    for (int i=0;i<console[01;31m[K-[m[K>history_array_size;i++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K70[m[K[36m[K:[m[K        console[01;31m[K-[m[K>history[i].text[0].character=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K71[m[K[36m[K:[m[K        console[01;31m[K-[m[K>history[i].len=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K73[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_index=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K74[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_count=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K84[m[K[36m[K:[m[K        //Split horizontally [01;31m[K-[m[K half width
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K85[m[K[36m[K:[m[K        console[01;31m[K-[m[K>x=pos.x+CONS_HALF_X;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K86[m[K[36m[K:[m[K        console[01;31m[K-[m[K>width=CONS_HALF_WIDTH;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K90[m[K[36m[K:[m[K        //Whole screen or split vertically [01;31m[K-[m[K full width
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K91[m[K[36m[K:[m[K        console[01;31m[K-[m[K>x=pos.x+CONS_WHOLE_X;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K92[m[K[36m[K:[m[K        console[01;31m[K-[m[K>width=CONS_WHOLE_WIDTH;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K97[m[K[36m[K:[m[K        //Split vertically [01;31m[K-[m[K half height
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K98[m[K[36m[K:[m[K        console[01;31m[K-[m[K>y=pos.y+CONS_HALF_Y;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K99[m[K[36m[K:[m[K        console[01;31m[K-[m[K>height=CONS_HALF_HEIGHT;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K103[m[K[36m[K:[m[K        //Whole screen or split horizontally [01;31m[K-[m[K full height
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K104[m[K[36m[K:[m[K        console[01;31m[K-[m[K>y=pos.y+CONS_WHOLE_Y;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K105[m[K[36m[K:[m[K        console[01;31m[K-[m[K>height=CONS_WHOLE_HEIGHT;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K111[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>text_len<CONS_BUFFER_SIZE)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K114[m[K[36m[K:[m[K        console[01;31m[K-[m[K>text_len++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K118[m[K[36m[K:[m[K        //Buffer full [01;31m[K-[m[K keep track of number of characters overwritten
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K119[m[K[36m[K:[m[K        if (console[01;31m[K-[m[K>text[console[01;31m[K-[m[K>buffer_index].character=='\n')
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K121[m[K[36m[K:[m[K            //New line overwritten [01;31m[K-[m[K reset count
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K122[m[K[36m[K:[m[K            console[01;31m[K-[m[K>overflow_count=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K127[m[K[36m[K:[m[K            console[01;31m[K-[m[K>overflow_count++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text[console[01;31m[K-[m[K>buffer_index].character=character;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K131[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text[console[01;31m[K-[m[K>buffer_index].fg=fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K132[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text[console[01;31m[K-[m[K>buffer_index].bg=bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K133[m[K[36m[K:[m[K    console[01;31m[K-[m[K>buffer_index++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K134[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>buffer_index==CONS_BUFFER_SIZE) console[01;31m[K-[m[K>buffer_index=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K139[m[K[36m[K:[m[K    console_char(character,console[01;31m[K-[m[K>text_col_fg,console[01;31m[K-[m[K>text_col_bg,console);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K161[m[K[36m[K:[m[K    console_text(text,console[01;31m[K-[m[K>text_col_fg,console[01;31m[K-[m[K>text_col_bg,console);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K167[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>input.len+text_len>=console[01;31m[K-[m[K>input_text_max[01;31m[K-[m[K1)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K        text_len=console[01;31m[K-[m[K>input_text_max[01;31m[K-[m[K1[01;31m[K-[m[Kconsole[01;31m[K-[m[K>input.len;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K175[m[K[36m[K:[m[K    text_index=console[01;31m[K-[m[K>input.cursor;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K178[m[K[36m[K:[m[K    for (int i=console[01;31m[K-[m[K>input.len;i>=text_index;i[01;31m[K-[m[K[01;31m[K-[m[K)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K180[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input.text[i+text_len]=console[01;31m[K-[m[K>input.text[i];
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K186[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input.text[text_index+i].character=text[i];
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K187[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input.text[text_index+i].fg=fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K188[m[K[36m[K:[m[K        console[01;31m[K-[m[K>input.text[text_index+i].bg=bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K191[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.cursor+=text_len;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K192[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.len+=text_len;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K209[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>input.visible==true)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K211[m[K[36m[K:[m[K        for (uint32_t char_index=0;char_index<console[01;31m[K-[m[K>input.len+1;char_index++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K213[m[K[36m[K:[m[K            if (char_index==console[01;31m[K-[m[K>input.len)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K217[m[K[36m[K:[m[K                color_fg=console[01;31m[K-[m[K>input_col_fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K218[m[K[36m[K:[m[K                color_bg=console[01;31m[K-[m[K>input_col_bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K223[m[K[36m[K:[m[K                character=console[01;31m[K-[m[K>input.text[char_index].character;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K224[m[K[36m[K:[m[K                color_fg=console[01;31m[K-[m[K>input.text[char_index].fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K225[m[K[36m[K:[m[K                color_bg=console[01;31m[K-[m[K>input.text[char_index].bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K228[m[K[36m[K:[m[K            if (char_index==console[01;31m[K-[m[K>input.cursor)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K230[m[K[36m[K:[m[K                //Cursor character [01;31m[K-[m[K invert
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K240[m[K[36m[K:[m[K            if (*col==console[01;31m[K-[m[K>width)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K244[m[K[36m[K:[m[K                pos.x=console[01;31m[K-[m[K>x;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K258[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>input.visible==true)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K262[m[K[36m[K:[m[K        int buffer_counter=console[01;31m[K-[m[K>buffer_index;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K264[m[K[36m[K:[m[K        for (uint32_t i=0;i<console[01;31m[K-[m[K>text_len;i++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K266[m[K[36m[K:[m[K            buffer_counter[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K269[m[K[36m[K:[m[K                //Wrap index [01;31m[K-[m[K buffer is circular
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K273[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>text[buffer_counter].character=='\n')
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K275[m[K[36m[K:[m[K                //Newline character [01;31m[K-[m[K done searching
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K276[m[K[36m[K:[m[K                last_line_length=line_length%console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K285[m[K[36m[K:[m[K            //No newline in console output [01;31m[K-[m[K calculate last line length from count of overflow characters
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K286[m[K[36m[K:[m[K            last_line_length=(console[01;31m[K-[m[K>overflow_count+line_length)%console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K        input_height=((last_line_length+console[01;31m[K-[m[K>input.len)/console[01;31m[K-[m[K>width);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K295[m[K[36m[K:[m[K    int new_height=console[01;31m[K-[m[K>height[01;31m[K-[m[Kinput_height;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K300[m[K[36m[K:[m[K    int buffer_counter=console[01;31m[K-[m[K>buffer_index;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K302[m[K[36m[K:[m[K    for (uint32_t i=0;i<console[01;31m[K-[m[K>text_len;i++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K305[m[K[36m[K:[m[K        buffer_counter[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K308[m[K[36m[K:[m[K            //Wrap index [01;31m[K-[m[K buffer is circular
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K312[m[K[36m[K:[m[K        if (console[01;31m[K-[m[K>text[buffer_counter].character=='\n')
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K314[m[K[36m[K:[m[K            //Newline character [01;31m[K-[m[K calculate number of lines generated by text on this line
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K316[m[K[36m[K:[m[K            buffer_start[01;31m[K-[m[K=line_length%console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K321[m[K[36m[K:[m[K                //Found enough lines of text to fill the screen [01;31m[K-[m[K stop looping
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K324[m[K[36m[K:[m[K            int new_lines=line_length_copy/console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K328[m[K[36m[K:[m[K                buffer_start[01;31m[K-[m[K=new_lines*console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K329[m[K[36m[K:[m[K                buffer_start[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K335[m[K[36m[K:[m[K                new_lines=new_height[01;31m[K-[m[Kline_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K336[m[K[36m[K:[m[K                buffer_start[01;31m[K-[m[K=new_lines*console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K354[m[K[36m[K:[m[K            if ((console[01;31m[K-[m[K>overflow_count+line_length)%console[01;31m[K-[m[K>width!=0)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K357[m[K[36m[K:[m[K                buffer_start[01;31m[K-[m[K=(console[01;31m[K-[m[K>overflow_count+line_length)%console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K361[m[K[36m[K:[m[K        int new_lines=line_length/console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K365[m[K[36m[K:[m[K            buffer_start[01;31m[K-[m[K=new_lines*console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K370[m[K[36m[K:[m[K            new_lines=new_height[01;31m[K-[m[Kline_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K371[m[K[36m[K:[m[K            buffer_start[01;31m[K-[m[K=new_lines*console[01;31m[K-[m[K>width;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K384[m[K[36m[K:[m[K        //[01;31m[K-[m[KCMD_BUFFER_SIZE then becomes 0 with line above which signals no more characters whereas
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K390[m[K[36m[K:[m[K    struct Point text_pos={console[01;31m[K-[m[K>x,console[01;31m[K-[m[K>y};
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K399[m[K[36m[K:[m[K    while(row<console[01;31m[K-[m[K>height)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K401[m[K[36m[K:[m[K        bool console_done=((buffer_start==(int)console[01;31m[K-[m[K>buffer_index)&&(draw_once==false));
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K413[m[K[36m[K:[m[K                text_pos=draw_char(' ',text_pos,console[01;31m[K-[m[K>input_col_fg,console[01;31m[K-[m[K>input_col_bg,false,FONT_5x8);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K414[m[K[36m[K:[m[K                if (blank_count>0) blank_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K418[m[K[36m[K:[m[K                char character=console[01;31m[K-[m[K>text[buffer_start].character;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K421[m[K[36m[K:[m[K                    //Newline character [01;31m[K-[m[K fill rest of line with blanks
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K422[m[K[36m[K:[m[K                    blank_count=console[01;31m[K-[m[K>width[01;31m[K-[m[Kcol;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K424[m[K[36m[K:[m[K                    col[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K429[m[K[36m[K:[m[K                    color_t fg=console[01;31m[K-[m[K>text[buffer_start].fg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K430[m[K[36m[K:[m[K                    color_t bg=console[01;31m[K-[m[K>text[buffer_start].bg;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K442[m[K[36m[K:[m[K            if (col==console[01;31m[K-[m[K>width)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K444[m[K[36m[K:[m[K                //Reached end of line on screen [01;31m[K-[m[K go to next line
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K447[m[K[36m[K:[m[K                text_pos.x=console[01;31m[K-[m[K>x;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K456[m[K[36m[K:[m[K    console[01;31m[K-[m[K>overflow_count=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K457[m[K[36m[K:[m[K    console[01;31m[K-[m[K>buffer_index=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K458[m[K[36m[K:[m[K    console[01;31m[K-[m[K>text_len=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K459[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.text[0].character=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K460[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.cursor=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K461[m[K[36m[K:[m[K    console[01;31m[K-[m[K>input.len=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K466[m[K[36m[K:[m[K    input_deep_copy(console[01;31m[K-[m[K>history+console[01;31m[K-[m[K>history_index,&console[01;31m[K-[m[K>input,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K467[m[K[36m[K:[m[K    console[01;31m[K-[m[K>history_index++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K468[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>history_index==console[01;31m[K-[m[K>history_array_size)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K469[m[K[36m[K:[m[K        console[01;31m[K-[m[K>history_index=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K470[m[K[36m[K:[m[K    if (console[01;31m[K-[m[K>history_count<console[01;31m[K-[m[K>history_array_size)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K471[m[K[36m[K:[m[K        console[01;31m[K-[m[K>history_count++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K479[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>history_count>0)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K482[m[K[36m[K:[m[K                if (console[01;31m[K-[m[K>input_copied==false)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K484[m[K[36m[K:[m[K                    //First time up pressed [01;31m[K-[m[K save current input
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K485[m[K[36m[K:[m[K                    input_deep_copy(&console[01;31m[K-[m[K>input_copy,&console[01;31m[K-[m[K>input,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K486[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>input_copied=true;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K487[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>history_read_count=console[01;31m[K-[m[K>history_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K490[m[K[36m[K:[m[K                if (console[01;31m[K-[m[K>history_read_count>0)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K493[m[K[36m[K:[m[K                    if (console[01;31m[K-[m[K>history_count==console[01;31m[K-[m[K>history_read_count)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K498[m[K[36m[K:[m[K                        input_deep_copy(&console[01;31m[K-[m[K>input_copy,&console[01;31m[K-[m[K>input,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K502[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>history_read_count[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K503[m[K[36m[K:[m[K                    int read_index=console[01;31m[K-[m[K>history_index;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K504[m[K[36m[K:[m[K                    read_index[01;31m[K-[m[K=console[01;31m[K-[m[K>history_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K505[m[K[36m[K:[m[K                    read_index+=console[01;31m[K-[m[K>history_read_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K506[m[K[36m[K:[m[K                    if (read_index<0) read_index+=console[01;31m[K-[m[K>history_array_size;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K507[m[K[36m[K:[m[K                    input_deep_copy(&console[01;31m[K-[m[K>input,console[01;31m[K-[m[K>history+read_index,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K512[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>input_copied)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K515[m[K[36m[K:[m[K                if (console[01;31m[K-[m[K>history_read_count==console[01;31m[K-[m[K>history_count)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K517[m[K[36m[K:[m[K                    //Already scrolled all the way down [01;31m[K-[m[K nothing to do
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K522[m[K[36m[K:[m[K                console[01;31m[K-[m[K>history_read_count++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K523[m[K[36m[K:[m[K                if (console[01;31m[K-[m[K>history_read_count==console[01;31m[K-[m[K>history_count)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K529[m[K[36m[K:[m[K                    input_deep_copy(&console[01;31m[K-[m[K>input,&console[01;31m[K-[m[K>input_copy,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K534[m[K[36m[K:[m[K                    int read_index=console[01;31m[K-[m[K>history_index;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K535[m[K[36m[K:[m[K                    read_index[01;31m[K-[m[K=console[01;31m[K-[m[K>history_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K536[m[K[36m[K:[m[K                    read_index+=console[01;31m[K-[m[K>history_read_count;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K537[m[K[36m[K:[m[K                    if (read_index<0) read_index+=console[01;31m[K-[m[K>history_array_size;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K538[m[K[36m[K:[m[K                    input_deep_copy(&console[01;31m[K-[m[K>input,console[01;31m[K-[m[K>history+read_index,console[01;31m[K-[m[K>input_text_max);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K544[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>input.cursor>0)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K545[m[K[36m[K:[m[K                console[01;31m[K-[m[K>input.cursor[01;31m[K-[m[K[01;31m[K-[m[K; 
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K549[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>input.cursor<console[01;31m[K-[m[K>input.len)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K550[m[K[36m[K:[m[K                console[01;31m[K-[m[K>input.cursor++;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K554[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.cursor=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K558[m[K[36m[K:[m[K            console[01;31m[K-[m[K>input.cursor=console_strlen(console[01;31m[K-[m[K>input.text);
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K561[m[K[36m[K:[m[K            //DEL with alpha active [01;31m[K-[m[K treat as DEL so don't need to remove alpha to delete
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K564[m[K[36m[K:[m[K            if (console[01;31m[K-[m[K>input.cursor>0)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K566[m[K[36m[K:[m[K                console[01;31m[K-[m[K>input.cursor[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K567[m[K[36m[K:[m[K                for (uint32_t i=console[01;31m[K-[m[K>input.cursor;i<console[01;31m[K-[m[K>input.len;i++)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K569[m[K[36m[K:[m[K                    console[01;31m[K-[m[K>input.text[i]=console[01;31m[K-[m[K>input.text[i+1];
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K571[m[K[36m[K:[m[K                console[01;31m[K-[m[K>input.len[01;31m[K-[m[K[01;31m[K-[m[K;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K581[m[K[36m[K:[m[K        input_buffer[i[01;31m[K-[m[Koffset]=input[01;31m[K-[m[K>text[i].character;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K585[m[K[36m[K:[m[K        input_buffer[input_size[01;31m[K-[m[K1]=0;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K591[m[K[36m[K:[m[K    while(text[01;31m[K-[m[K>character)
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K603[m[K[36m[K:[m[K    struct ConsoleChar *text_ptr=dest[01;31m[K-[m[K>text;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K606[m[K[36m[K:[m[K    dest[01;31m[K-[m[K>text=text_ptr;
[35m[Ksrc/console.c[m[K[36m[K:[m[K[32m[K607[m[K[36m[K:[m[K    memcpy(dest[01;31m[K-[m[K>text,source[01;31m[K-[m[K>text,elements*sizeof(struct ConsoleChar));
[35m[Ksrc/key-remap.h[m[K[36m[K:[m[K[32m[K2[m[K[36m[K:[m[K//For remapping keys on PC to calculator keys, see key[01;31m[K-[m[Kremap[01;31m[K-[m[Kpc.h
